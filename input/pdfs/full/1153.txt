EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
6© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
7© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
8© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
9© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
10© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
15© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
16© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
17© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
18© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
19© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
20© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
21© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
22© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
23© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
24© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
25© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
26© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
27© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
28© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
29© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
30© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
31© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
32© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
33© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
34© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
35© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
36© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
37© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
38© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
39© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
40© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
41© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
42© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
43© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
44© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
45© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
46© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
47© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
48© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
49© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
50© Revue MODULAD, 2007
Numéro 36
11
Caserta, 14 march 2007
Merging data streams in 
operational risk management
Paolo Giudici
Department of Statistics “L. Lenti”
University of Pavia
giudici@unipv.it
2
Agenda
z Background
z Current approaches
z Our proposed approach
z Open  issues
23
Merging data streams in 
operational risk management
Background
4
Statistical models for risk
management
z Legislative background: regulations of 
Banking Authorities (Basel2 regulations, 
www.bis.org); but also information security
(ISO 17799) and business continuity (BS 
25999) require risk measurement
z Strategic background is to improve
controls, efficiency and performance of 
(service) companies
35
Statistical models for financial risk
management
Objectives of modelling:
z efficient capital allocation, to cover 
unexpected losses without allocating too much
capital
z effective performance monitoring of business 
units, branches and processes
Necessary condition is a valid measurement of 
risks: good data quality, good data mining
6
An (integrated) statistical view
on risk management
z Objective: to estimate a loss distribution, and derive 
functionals of interest from it (such as the Value at Risk)
z Losses in market risk are realisations of a continuous
stochastic process
z Losses in credit risk are realisations of a convolution
between a binary process (default or not)  and a 
continuous one
z Losses in operational risk are realisations of a 
convolution between a counting process (frequency) 
and a number of continuous ones (severities)
47
Final aim: distribution of 
integrated losses
Total losses 
Market losses
Credit losses
Operational losses
8
Operational risk
z Risk of financial losses caused by: inadequate
internal processes, human errors, IT failures or 
external events. (Basel Committee, Working 
Paper on the Regulatory Treatment of 
Operational Risk, September 2001).
z Measures risks due to enterprise management 
(rather than financial or credit management).  
z Compulsory for most banks by end of 2007
59
Advanced Measurement
Approaches
z Suited for large sized and efficient banks, 
and those operating at the international level
z Based on the analysis of all available and 
relevant data, by means of a statistical
model aimed at estimating the probability
distribution of the losses
z Most used statistical models are: scorecard, 
actuarial. Also causal
10
Merging data streams in 
operational risk management
Current approaches
611
Scorecard models
z Based on expert opinions (of process owners) 
on operational losses expected for a future 
period (e.g. next year)
z Each process owner evaluates: which are the 
likely risks; the expected losses; possible causal
factors (key risk indicators) of the losses
z In the most diffuse version assessments are in 
terms of expected frequencies and severities. 
Typically both on a categorical scale (low, 
medium,high). 
12
Actuarial models
z Employs two types of probability distributions: 
z the distribution of the frequency of the risk events
z the distribution of the losses that arise for each given event
(severity).  
z The convolution between the two determines the loss
distributions and, then, the Value at Risk. 
z Suited for rare events, with high severity. Do not model 
relationships between loss events and with their causes. 
Requires simulation based methods to derive the loss
distribution.
713
Actuarial methods
z For each risk type, business unit, and a given
period, operational risk losses can be defined
as a sum (S) of a random number (n) of single 
losses (Xi):
S = X1 + X2 + …+ Xn
z The actuarial model typically assumes that: a)
single losses are i.i.d. random variables; b)
the distribution of  N (frequency) is
independent on that of  Xi (severity)
14
Actuarial models
Number of events Severity per event
Var (99.9%)
Expectedloss
Montecarlo convolution
Frequency Severity
Total loss
815
Monte Carlo simulation
(…..)10000
(…..)(…..)
406.96201620.6151922484677.8950.933653548073.99940.938475312
011
4.9112199190.3742480.0001932650.0418710.7685896880.027833310
150.83977540.28775919
23985.125180.77028718
4872414.650.98223817
06
05
04
25007.665280.77352213
0.2270861030.227363300744623.60.98498594.107399580.24796332
01
3 Third event2 Second event1 First Event
FREQ.RUN #
SEVERITY
16
Bayesian actuarial models
z Can add a prior distribution to both the 
frequency and severity distribution. 
z A conjugate and little informative approach
can be chosen.
z E.g. gamma prior for both the frequency and 
the severity distribution
917
Causal models
z Each operational loss
depends on the outcome
of other events (causes), 
each of which can also
be dependent
z Suited for frequent
events, with low severity
z Difficult to specify, yet
very useful for audit and 
control purposes
18
Bayesian networks
Inc312
Inc371
Inc321
Inc821 Inc522
Advantages:
1) Can exploit correlations and 
causations with all risk factors
2) Can handle fusion of different
sources of information;
Disadvantages:
1) Joint treatment of the two
components of the expected
loss (frequency and severity);
10
19
Merging data streams in 
operational risk management
Our proposed approach
20
Basel 2 requirements
From the official documentation (www.bis.org) it can be desumed
that AMA models must be based on the combined usage of four
data sources:
“Any risk measurement system must have certain key features to meet 
the supervisory soundness standard set out in this section.  These 
elements must include the use of internal data, relevant external data,
scenario analysis and factors reflecting the business environment 
and internal control systems”
e.g. A sound AMA approach must combine: historical loss data, 
external (consortium) data, expert opinions, key risk indicator data
Our proposal aims to fulfill this requirement.
11
21
How to integrate ?
z The open problem is how to integrate, in a statistically coherent and 
computationally efficient way, different sources of data. 
z We have proposed an approach based on: non parametric models
to prioritise risks and  calculate the value at risk. This will be
described here. 
z A different development involves lifting the assumption of perfect
dependence among risk types, using Bayesian networks and 
Copula models. See e.g.  Bonafede and Giudici (2007) and Dalla 
Valle, Giudici and Fantazzini (2007)
22
Measurement units
5 6
1.1 1.2 2.1 2.2 3.1 3.2 3.3 4.1 4.2 4.3 4.4 4.5 5.1 6.1 7.1 7.2 7.3 7.4 7.5 7.6
1
2
3
4
5
6
7
8
Event type
   
 B
us
in
es
s 
Li
ne
1 2 3 4 7
For example we may consider 8 business lines and 20 event
types, leading to 160 measurement units (named CELLS for
brevity)
Operational risk events
are classified in Business 
Lines and  Event types
12
23
Three sources of information
15                     5                 25
4
5
10
3
93
Internal
quantitative 
data
Pooled
industry
data
OPINIONS
Cells for which no 
information is
available
Figures indicate 
Cells for which there
are data of some 
kind
24
Non zero cells
13
25
Internal Loss data: example
Not real data!
26
External loss data: example
Source: DIPO
Losses 2003-2006 for Italian Consortium DIPO
2
19
7
33
1
9
97
€ 26.142
€ 19.766
€ 136.069
€ 29.702
€ 46.870
€ 40.961
€ 52.284
€ 375.551
€ 980.166€ 952.485
€ 29.052
€ 421.828
0
20
40
60
80
100
120
frode interna frode esterna rapporto di lavoro clienti danni materiali sistemi processi
€ -
€ 100.000
€ 200.000
€ 300.000
€ 400.000
€ 500.000
€ 600.000
€ 700.000
€ 800.000
€ 900.000
€ 1.000.000
frequenza severità media severità totale
€ 3.973.219
14
27
Self Assessment data: 
example
Frequency 1.1.1 1.1.2 1.2.1 1.2.2 1.2.3 1.2.4 1.2.5 1.2.6 1.2.7 1.2.8 1.2.9 1.2.10
A Annual 30 30 28 32 27 30 32 32 29 32 27 29
B Monthly 2 2 3 3 2 3 4 3
C Weekly 2 1
D Daily
Total 32 32 31 32 32 32 32 32 32 32 32 32
A Annual 93,8% 93,8% 90,3% 100,0% 84,4% 93,8% 100,0% 100,0% 90,6% 100,0% 84,4% 90,6%
B Monthly 6,3% 6,3% 9,7% 0,0% 9,4% 6,3% 0,0% 0,0% 9,4% 0,0% 12,5% 9,4%
C Weekly 0,0% 0,0% 0,0% 0,0% 6,3% 0,0% 0,0% 0,0% 0,0% 0,0% 3,1% 0,0%
D Daily 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0%
Total 100% 100% 100% 100% 100% 100% 100% 100% 100% 100% 100% 100%
28
Risk indicators: example
Correction factor of the i-th area (e.g. province) on the j-th
cell (business line * event type) 
Mean of the j-th KRI in the i-th area;
Ratio between deviance of the area means and total deviance
for the i-th KRI;
15
29
Structure of the proposed model
Expert opinionsExpert opinions
Losses DBLosses DB
DIPODIPO
Internal
Information
sources
ScalingScaling
Pre processingPre processing
KRI
(Key Risk
Indicators)
KRI
(Key Risk
Indicators)
Data 
transformation
External
DATAMART ORMDATA ART OR
Actuarial Non parametric Bayesian
Back-testing in and 
out of sample
VAR
30
Results – rating oprisks
Frequency 1.1.1 1.1.2 1.2.1 1.2.2 1.2.3 1.2.4 1.2.5 1.2.6 1.2.7 1.2.8 1.2.9 1.2.10
A Annual 30 30 28 32 27 30 32 32 29 32 27 29
B Monthly 2 2 3 3 2 3 4 3
C Weekly 2 1
D Daily
Total 32 32 31 32 32 32 32 32 32 32 32 32
A Annual 93,8% 93,8% 90,3% 100,0% 84,4% 93,8% 100,0% 100,0% 90,6% 100,0% 84,4% 90,6%
B Monthly 6,3% 6,3% 9,7% 0,0% 9,4% 6,3% 0,0% 0,0% 9,4% 0,0% 12,5% 9,4%
C Weekly 0,0% 0,0% 0,0% 0,0% 6,3% 0,0% 0,0% 0,0% 0,0% 0,0% 3,1% 0,0%
D Daily 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0% 0,0%
Total 100% 100% 100% 100% 100% 100% 100% 100% 100% 100% 100% 100%
Max 93,8% 93,8% 90,3% 100,0% 84,4% 93,8% 100,0% 100,0% 90,6% 100,0% 84,4% 90,6%
Median A A A A A A A A A A A A
Gini index 0,156 0,156 0,233 0,000 0,367 0,156 0,000 0,000 0,227 0,000 0,362 0,227
Min Gini 0,000
Max Gini 0,849
Gini Rating AAA AAA AAA AAA AA AAA AAA AAA AAA AAA AA AAA
16
31
Results - prioritisation
32
Results – VaR reporting
z Comparison between expected, 
observed and non parametric VaR
distributions
VAR "atteso" 2005
6%
40%
52%
2%
external 05 people 05 process 05 system 05
VaR "Bayesiano"
88%
12%
PEOPLE PROCESS
VaR "storico"
83%
17%
PEOPLE PROCESS
17
33
Results - VaR reporting
34
Results - Backtesting
125.661
382.657
853.753
1.645.004
2.596.128
6.260.630
12.770.500
- 2.000.000 4.000.000 6.000.000 8.000.000 10.000.000 12.000.000 14.000.000
Perdite effettive 2005
VaR Storico
VaR Bayesiano
Basic Indicator
VaR MC Attuariale
VaR MC Bayes
VaR Atteso
18
35
Merging data streams in 
operational risk management
Open issues and references
36
Open  issues
a) Necessary to improve expert opinions: more reliable
responses needed (cultural factor). For example, as the 
required VaR is at the 99,9%  level, necessary to have
different classes widhts (especially in the tails). 
b) More work to calibrate different databases with each other
(eg loss data collection, self-assessment, pooled data). 
c) Necessary to measure and model explicitly key risk
indicators and control factors, and insert them in the model 
19
37
References (1)
z Alexander, C. (2003). Operational Risk: Regulation,Analysis and 
Management, London. Financial Times, Prentice Hall.
z Basel Committee on Banking Supervision (2001) Working Paper 
on the Regulatory Treatment of Operational Risk, (www.bis.org).
z Bonafede, E.C. and Giudici, P. (2007). Bayesian networks for 
enterprise risk assessment. To appear in  Physica A.
z Cornalba, C. and Giudici, P. (2004). Statistical models for 
operational risk management. Physica A, n. 338, pp. 166-172.
z Cruz M. (2002) Modeling, Measuring and Hedging Operational 
Risk, John Wiley & Sons, Chichester.
z Dalla Valle, L., Fantazzini, D. and Giudici, P. (2007). Copulae
and Operational Risk.  To appear in International Journal of Risk 
Assessment and Management.
38
References (2)
z Fanoni, F., Giudici, P. and Muratori, M. (2005). Il rischio 
operativo: misurazione, monitoraggio, mitigazione. Il sole 24 ore.
z Frachot, A., Georges, P. and Roncalli, T. (2001). Loss 
distribution approach for operational risk. Working Paper, Groupe
de Recherche Opérationnelle du Crédit Lyonnais.
z Giudici, P. and Bilotta, A. (2004). Modelling Operational Losses: 
a Bayesian Approach, Quality and Reliability Engineering 
International, n.20, pp. 407-417.
z Giudici P. (2003) Applied Data Mining: Statistical Methods for 
Business and Industry. John Wiley & Sons, Chichester.
z King J. (2001) Operational Risk. Measurement and Modelling, 
John Wiley & Sons, Chichester.
z Pezier, J. (2002). A constructive review of the Basel proposals on 
operational risk. ISMA Technical report, University of Reading.
