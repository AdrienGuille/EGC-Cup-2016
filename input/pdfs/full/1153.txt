EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
42© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
43© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
44© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
45© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
46© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
47© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
48© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
49© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
50© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
51© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
52© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
53© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
54© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
55© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
56© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
57© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
58© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
59© Revue MODULAD, 2007
Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
60© Revue MODULAD, 2007
Numéro 36
1Sequence Clustering in Data 
Streams
A.Marascu F. Masseglia
AxIS Project-Team
INRIA – Sophia Antipolis
European Workshop on Data Stream Analysis
Caserta March 15, 2007
2
Goals: 
• Extract sequential patterns from data streams. Applied to: behaviour
of a Web site’s users.
• Identifying problems arising with this pattern extraction. Particularly 
the management of their history.
Framework: The SCDS method
(Sequence Clustering in Data Streams)
European Workshop on Data Stream Analysis
Caserta March 15, 2007
23
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Data Streams: a few words…
• New elements are generated continuously.
• Data have to be considered as fast as possible.
• No blocking operator can be performed.
• Data can be examined only once.
• Memory usage is restricted.
4
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Sequential Pattern Mining: some definitions.
• Item: bought by a customer
• Transaction: a customer + an item + a timestamp
• Sequence: ordered list of itemsets
• Data sequence: stands for the activities of a customer. 
Let T1, T2, …, Tn be the transactions of Cj, the data 
sequence of Cj is:
< itemset(T1) itemset(T2) … itemset(Tn)>
• Minimum support : the minimum number of 
occurrences of a sequential pattern to be considered as 
frequent.
35
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Illustration:
Theme3Theme2Theme1ResearchU5
ListPaper1ListPublicationsU4
Theme4Theme3Theme1ResearchU3
Paper2ListPaper1PublicationsU2
Paper3Paper2Paper1PublicationsU1
Question : « Can we find a behavior that would be shared by (at least)  40% 
of the users recorded in the log file? »
behaviour : a series a requests performed during a navigation on the site.
li i
li i
6
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Extracting patterns from data streams
1) Satisfy the constraints of a data stream environment.
High speed algorithms.
Sampling with an estimation of the quality.
etc.
2) Managing the history of frequencies
Logarithmic Tilted Time Window (Han et al.)
Segment Tuning and Relaxation (Teng et al.)
Frequent itemset (a b c)
0…0.050.120.250.180.17
256 days…2 hours1 hour30 min15 min15 min
time
Su
pp
or
t
47
Overview
Stream
Batch Bn Batch Bn-1 Batch Bn-2 …
Data mining
Result
Bn
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Result
Bn-1
Result
Bn-2
8
Example: FTPStream
FP-tree
FP-Growth
FP-tree
FP-stream
Stream
Batch Bn Batch Bn-1 Batch Bn-2 …
European Workshop on Data Stream Analysis
Caserta March 15, 2007
59
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Why is this such a deal to extract sequential 
patterns from a data stream?
A sequential pattern mining algorithm may be based on:
• Breadth-first search
• Depth-first search
• Without candidate generation
• Sampling
Size of 
the resu
lt!
Size of 
the batc
h!
10
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Why is this such a deal to extract sequential 
patterns from a data stream?
…
…
…
12121C2
12121C1
T30T4T3T2T1
0
100000
200000
300000
400000
500000
2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27
Length of data sequences: 22
Length of data sequences: 24
Length of data sequences: 26
Length of data sequences: 28
611
European Workshop on Data Stream Analysis
Caserta March 15, 2007
“We have to find the balance between the execution 
time and the quality of the extracted patterns.”
Our proposal relies on two compromises:
1. A greedy sequence clustering algorithm.
2. A sequence alignment method applied to each cluster.
12
European Workshop on Data Stream Analysis
Caserta March 15, 2007
A Greedy Algorithm for clustering 
streaming sequences
Builds the clusters on the fly.
When “n” sequences have been processed: next batch. 
Let S be the current sequence.
Scan C, the set of clusters.
Let Ci be the cluster having the most similar centroid to S,
insert (S, Ci);
update_centroid(Ci);
If no cluster has been found then
create_cluster (Cj, S);
713
Overview
Stream
Batch Bn Batch Bn-1 Batch Bn-2 …
Cluster 1
Cluster 2
Cluster m
Centroid:
< (a) (b) (d) >
Centroid:
< (a) (c) (e) >
Centroid:
< (m) (n) (p) >
European Workshop on Data Stream Analysis
Caserta March 15, 2007
14
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Sequence alignment for each cluster
The centroid is the result of an alignment applied to the 
sequences of each cluster.
< (a) (b) (d) >
< (a) (c) (d) > ⇒
<  (a)        (b)       (d)   >
<  (a)        (c)       (d)   >
< (a:2) (b:1, c:1) (d:2) >
Filter k =1: < (a:2) (b:1, c:1) (d:2) >
Filter k =2: < (a:2) (d:2) >
815
European Workshop on Data Stream Analysis
Caserta March 15, 2007
Managing the history of the extracted patterns
• On static databases, the knowledge is stable
• On data streams, the knowledge is evolving with the stream
16
Ongoing work: an incremental clustering.
Motivation: The division of the stream into batches “blurs” the 
history of the frequent patterns.
0%0%4%0%5%ACDE
0%1%0%3%0%ABDE
0%1%4%3%5%A(BC)DE
256 jours…1h30 min15 min15 minSequence
A
B                  C
D                  D
E                  E
European Workshop on Data Stream Analysis
Caserta March 15, 2007
917
We propose to perform an incremental clustering 
in order to maintain a coherent history.
• Idea : have the cluster evolving.
• Objective : be independent from slight variations 
when managing the history of extracted patterns.
• Principle : keep the centroid (aligned sequence) of 
the clusters from one batch to another.
European Workshop on Data Stream Analysis
Caserta March 15, 2007
2%
A(BC)E
1h
…
…
…
2%4%3%
A(BC)DEA(BC)DA(BC)D
30 min15 min15 min
18
A few questions motivating this work:
- Is data mining able to help summarizing a stream?
- What should this summary look like?
- Where does the approximation stop?
European Workshop on Data Stream Analysis
Caserta March 15, 2007
