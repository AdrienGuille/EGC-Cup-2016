Echantillonnage spatio-temporel de flux de donnÃ©es
distribuÃ©s
Raja Chikyâˆ—, JÃ©rÃ´me CubillÃ©âˆ—âˆ—, Alain Dessertaineâˆ—âˆ—,
Georges HÃ©brailâˆ—, Marie-Luce Picard âˆ—âˆ—
âˆ— GET-ENST Paris
Laboratoire LTCI - UMR 5141 CNRS - DÃ©partement Informatique et RÃ©seaux
46 rue Barrault, 75634 Paris Cedex 13
Email: prenom.nom@enst.fr
âˆ—âˆ— EDF R&D - DÃ©partements ICAME et OSIRIS
1, Avenue du GÃ©nÃ©ral de Gaulle, 92140 Clamart
Email: prenom.nom@edf.fr
RÃ©sumÃ©. Ces derniÃ¨res annÃ©es, sont apparues de nombreuses applications, uti-
lisant des donnÃ©es potentiellement infinies, provenant de faÃ§on continue de cap-
teurs distribuÃ©s. On retrouve ces capteurs dans des domaines aussi divers que la
mÃ©tÃ©orologie (Ã©tablir des prÃ©visions), le domaine militaire (surveiller des zones
sensibles), lâ€™analyse des consommations Ã©lectriques (transmettre des alertes en
cas de consommation anormale),... Pour faire face Ã  la volumÃ©trie et au taux
dâ€™arrivÃ©e des flux de donnÃ©es, des traitements sont effectuÃ©s â€™Ã  la volÃ©eâ€™ sur les
flux. En particulier, si le systÃ¨me nâ€™est pas assez rapide pour traiter toutes les
donnÃ©es dâ€™un flux, il est possible de construire des rÃ©sumÃ©s de lâ€™information.
Cette communication a pour objectif de faire un premier point sur nos travaux
dâ€™Ã©chantillonnage dans un environnement de flux de donnÃ©es fortement distri-
buÃ©s. Notre approche est basÃ©e sur la thÃ©orie des sondages, lâ€™analyse des donnÃ©es
fonctionnelles et la gestion de flux de donnÃ©es. Cette approche sera illustrÃ©e par
un cas rÃ©el : celui des mesures de consommations Ã©lectriques.
1 Motivations
Les entrepÃ´ts de donnÃ©es sont de plus en plus alimentÃ©s par des flux de donnÃ©es provenant
dâ€™un grand nombre de capteurs distribuÃ©s. MalgrÃ© lâ€™Ã©volution des nouvelles technologies de
traitement et de stockage des donnÃ©es, il reste difficile voire impossible de conserver la tota-
litÃ© de lâ€™information. Pour faire face Ã  cette inflation, de nombreux travaux (Aggarwal, 2007;
Babcock et al, 2002; Muthukrishnan, 2005) ont Ã©tÃ© menÃ©s ces derniÃ¨res annÃ©es sur la gestion
et lâ€™analyse de flux de donnÃ©es : un flux de donnÃ©es est dÃ©fini comme une sÃ©quence continue,
potentiellement infinie, de n-uplets (dâ€™enregistrements) ayant tous la mÃªme structure. Lâ€™ordre
dâ€™arrivÃ©e des n-uplets nâ€™est pas contrÃ´lÃ©, et les donnÃ©es, de par lâ€™importance de leur volume et
de leur dÃ©bit dâ€™arrivÃ©e, ne peuvent pas exhaustivement Ãªtre stockÃ©es sur disque : les donnÃ©es
passent, et doivent Ãªtre traitÃ©es â€™Ã  la volÃ©eâ€™.
Echantillonnage spatio-temporel de flux de donnÃ©es distribuÃ©s
Les applications actuelles des approches de traitement de flux de donnÃ©es portent surtout
sur la supervision de systÃ¨mes, sur le dÃ©clenchement dâ€™alarmes en temps rÃ©el, ou plus gÃ©nÃ©rale-
ment sur la production de synthÃ¨ses dâ€™aide Ã  la dÃ©cision Ã  partir de plusieurs flux. Les systÃ¨mes
de gestion de flux de donnÃ©es (SGFD) (Stonebraker et al., 2005; STREAM; StreamBase; Go-
lab et al., 2003) permettent de gÃ©rer facilement, et de faÃ§on gÃ©nÃ©rique les flux de donnÃ©es en
inversant le rÃ´le des donnÃ©es et des requÃªtes par rapport aux systÃ¨mes de gestion de bases de
donnÃ©es classiques : les donnÃ©es sont volatiles et non prÃ©dictibles ; les requÃªtes sont statiques
et sâ€™exÃ©cutent en permanence sur ces donnÃ©es. On parle de requÃªtes continues. Un flux Ã©tant
potentiellement infini, il est nÃ©cessaire de dÃ©finir des fenÃªtres dâ€™intÃ©rÃªt sur le flux, en particulier
des fenÃªtres temporelles le plus souvent glissantes.
Le caractÃ¨re distribuÃ© des flux, rajoutÃ© au fait quâ€™ils sont potentiellement infinis et arrivent
avec un dÃ©bit Ã©levÃ©, implique que de nombreux traitements nÃ©cessitent la mise en place de
techniques dâ€™approximation dont la qualitÃ© de rÃ©sultat sera ajustÃ©e en fonction des ressources
disponibles. On retrouve cette problÃ©matique dans le domaine des consommations Ã©lectriques.
En effet, avec le dÃ©ploiement envisagÃ© Ã  moyen terme de compteurs communicants chez les
clients des fournisseurs dâ€™Ã©lectricitÃ©, les consommations dâ€™Ã©nergie Ã©lectrique pourront Ãªtre tÃ©-
lÃ©relevÃ©es Ã  des pas de temps pouvant aller jusquâ€™Ã  la seconde. Ceci permettra dâ€™effectuer des
opÃ©rations tels que la facturation, lâ€™agrÃ©gation, le contrÃ´le,... Il nâ€™est cependant pas envisa-
geable de rÃ©cupÃ©rer tous ces flux Ã  cause de la volumÃ©trie (plus de 30 millions de compteurs)
et des coÃ»ts dâ€™exploitation.
Nous formalisons le problÃ¨me posÃ© dans le cadre de cette communication comme suit :
Nous disposons de N capteurs reliÃ©s Ã  un systÃ¨me central et qui envoient une sÃ©quence de
mesures temporelles en continu. Nous supposons que les donnÃ©es sont gÃ©nÃ©rÃ©es rÃ©guliÃ¨rement
et que les mesures sont numÃ©riques et unidimensionnelles. Chaque flux est dÃ©coupÃ© en pÃ©riodes
(fenÃªtres temporelles) de mÃªme taille. Une fenÃªtre temporelle est constituÃ©e de p Ã©lÃ©ments (on
suppose constant le nombre dâ€™Ã©lÃ©ments dâ€™une fenÃªtre car le flux est rÃ©gulier). Dans la suite,
on utilise le terme Â« courbe Â» pour qualifier chaque sÃ©quence temporelle. Nous supposons que
le systÃ¨me central a une limite de stockage par pÃ©riode de temps Ã  ne pas dÃ©passer, soit s
cette limite (s < N âˆ— p). Lâ€™objectif de ce travail est dâ€™approcher les courbes originales Ã  partir
dâ€™un ensemble de donnÃ©es sÃ©lectionnÃ©es en respectant la limite de stockage au niveau central.
Plusieurs travaux ont Ã©tÃ© menÃ©s ces derniÃ¨res annÃ©es sur lâ€™Ã©chantillonnage et la construction
de rÃ©sumÃ©s Ã  partir de flux de donnÃ©es.
2 DÃ©finitions
2.1 Echantillonnage temporel
Lâ€™Ã©chantillonnage temporel consiste Ã  conserver habilement un nombre rÃ©duit de mesures
sur une courbe, sans perdre trop dâ€™information sur la forme de la courbe. Remarquons que
si aucun Ã©chantillonnage temporel nâ€™est rÃ©alisÃ©, alors agrÃ©ger les courbes de la population P
consiste, Ã  chaque instant t, Ã  sommer lâ€™ensemble des valeurs de consommationCi(t)mesurÃ©es
sur chaque courbe i de la maniÃ¨re suivante :
C(t) =
Nâˆ‘
i=1
Ci(t) (1)
R.Chiky et al.
Le fait dâ€™Ã©chantillonner de maniÃ¨re temporelle les courbes nÃ©cessite de les estimer Ã  partir des
mesures sÃ©lectionnÃ©es par interpolation. Un tel cas de figure peut Ãªtre rapprochÃ© des travaux
autour de lâ€™analyse des donnÃ©es fonctionnelles (Deville, 1974; Ramsay et Silverman, 2005).
Ces interpolations utilisent des bases fonctionnelles (comme les splines, les ondelettes, ou des
transformations de fourier). Les analyses se font alors dans le nouveau systÃ¨me de coordonnÃ©es
issu de la base de fonctions choisie.
Dans notre cas, nous proposons de remplacer dans (1) la valeur inconnue en un instant t
par sa valeur interpolÃ©e :
CËœ(t) =
Nâˆ‘
i=1
(CËœi(t) + i(t)) (2)
Avec i(t) lâ€™erreur dâ€™interpolation pour la courbe i Ã  lâ€™instant t.
2.2 Echantillonnage spatial
Lâ€™Ã©chantillonnage spatial consiste Ã  conserver habilement un certain nombre de courbes -
ce qui revient Ã  une problÃ©matique similaire Ã  celles abordÃ©es dans la thÃ©orie des sondages.
Dans ce cadre, nous travaillons sur la base dâ€™une population finie (lâ€™ensemble des N cap-
teurs). Nous construisons une stratÃ©gie dâ€™Ã©chantillonnage sur cette base afin dâ€™utiliser au mieux
les informations disponibles sur les capteurs pour bien estimer, sur lâ€™Ã©chantillon qui sera fina-
lement construit, la ou les variables dâ€™intÃ©rÃªt (ici, la variable dâ€™intÃ©rÃªt est la courbe globale).
Citons, parmi ces stratÃ©gies, les Ã©chantillons stratifiÃ©s, les Ã©chantillons Ã  probabilitÃ©s inÃ©gales,
et les Ã©chantillons Ã©quilibrÃ©s (pour plus de dÃ©tails, voir (Ardilly, 2006; TillÃ©, 2006)).
Pour ce faire, nous avons besoin, au minimum, de la liste de tous les capteurs i, auxquels
nous affectons une probabilitÃ© dâ€™inclusion pii dans notre Ã©chantillon. Un estimateur sans biais
souvent utilisÃ© est lâ€™estimateur dâ€™Horvitz-Thompson. Ainsi, nous pouvons calculer lâ€™estimateur
du total dâ€™une variable X , dont les valeurs xi sont mesurÃ©s seulement pour les individus i
appartenant Ã  lâ€™Ã©chantillon que nous nommerons S de la maniÃ¨re suivante :
XË†HT =
âˆ‘
iâˆˆS
xi
pii
(3)
Et lâ€™estimation de sa variance est donnÃ©e par :
Ë†V ar(XË†HT ) =
âˆ‘
iâˆˆS
âˆ‘
jâˆˆS
(
xi
pii
xj
pij
piij âˆ’ piipij
piij
)
(4)
Avec piij la probabilitÃ© dâ€™inclusion double quâ€™un couple (i, j) appartienne conjointement Ã 
lâ€™Ã©chantillon. Cette probabilitÃ© dÃ©pend de la stratÃ©gie utilisÃ©e lors de lâ€™Ã©chantillonnage. Lâ€™esti-
mateur de la variance prÃ©sentÃ© ci-dessus est souvent dÃ©licat Ã  calculer de maniÃ¨re exacte ; des
approximations par linÃ©arisation, ou par bootstrap sont proposÃ©es dans la littÃ©rature (Deville,
1999; Ardilly, 2006).
Dans le cas dâ€™une extrapolation de courbes sans Ã©chantillonnage temporel, il suffit de rem-
placer xi et xj par Ci(t) et Cj(t) pour un instant t de la fenÃªtre temporelle.
Echantillonnage spatio-temporel de flux de donnÃ©es distribuÃ©s
2.3 Exemples dâ€™application aux flux de donnÃ©es distribuÃ©s
Plusieurs travaux de recherche ont Ã©tÃ© menÃ©s pour dÃ©velopper des algorithmes de rÃ©su-
mÃ©s des donnÃ©es au fil de lâ€™eau appliquÃ©s Ã  des flux de donnÃ©es distribuÃ©s. Quelques travaux
Ã©chantillonnent les sources de flux de donnÃ©es (Ã©chantillonnage dâ€™individus ou Ã©chantillon-
nage spatial). Dans ce cadre, un exemple dâ€™application est donnÃ© dans (Willett et al., 2004).
En effet, une premiÃ¨re phase active un sous-ensemble de capteurs pour rÃ©cupÃ©rer leurs don-
nÃ©es. Ceci fournit une estimation de lâ€™environnement en dÃ©tectant les corrÃ©lations entre les
capteurs. Puis une deuxiÃ¨me phase dite dâ€™amÃ©lioration permet dâ€™activer sÃ©lectivement des cap-
teurs supplÃ©mentaires afin dâ€™amÃ©liorer les estimations.
Dâ€™autres travaux Ã©chantillonnent les donnÃ©es provenant de chaque source (Ã©chantillonnage
temporel). Une approche concernant lâ€™Ã©chantillonnage temporel est prÃ©sentÃ©e dans (Jain et al.,
2004). Dans cet article, un filtre de Kalman est utilisÃ© au niveau de chaque capteur pour effec-
tuer des prÃ©dictions. Une granularitÃ© temporelle (un pas dâ€™Ã©chantillonnage) est ajustÃ©e selon
lâ€™erreur de prÃ©diction. Si ce pas dÃ©passe un seuil allouÃ© par le systÃ¨me central, un programme
dâ€™optimisation est lancÃ© au niveau central afin dâ€™affecter de nouveaux seuils aux capteurs.
3 Approche proposÃ©e et consÃ©quences sur les estimations
3.1 Echantillonnage spatio-temporel
Dans les deux cas dâ€™Ã©chantillonnage citÃ©s ci-dessus (Ã©chantillonnage temporel et Ã©chan-
tillonnage spatial), on nâ€™utilise pas les vraies valeurs rÃ©sumÃ©es mais des estimations (inter-
polation dans le premier cas, estimations entachÃ©es dâ€™une erreur dâ€™Ã©chantillonnage dans le
deuxiÃ¨me). Nous proposons une stratÃ©gie qui consiste Ã  combiner ces deux approches, par
souci dâ€™avoir des estimateurs des courbes agrÃ©gÃ©es de qualitÃ© acceptable (avec des erreurs dâ€™in-
terpolation et/ou dâ€™Ã©chantillonnage faibles). Nous nommerons cette stratÃ©gie Ã©chantillonnage
spatio-temporel.
Nous formulons le problÃ¨me de lâ€™Ã©chantillonnage temporel comme suit : soit m la plus
grande granularitÃ© temporelle permise pour rÃ©cupÃ©rer les donnÃ©es. On cherche Ã  dÃ©terminer un
planning de collecte de donnÃ©es Ã  effectuer pendant une pÃ©riode t sur lesN capteurs, en effec-
tuant un Ã©chantillonnage temporel au sein de chaque capteur. Pour cela, nous avons modÃ©lisÃ©
le problÃ¨me sous forme dâ€™un programme dâ€™optimisation linÃ©aire qui affectera de faÃ§on opti-
male une granularitÃ© temporelle infÃ©rieure ou Ã©gale Ã m Ã  appliquer Ã  chaque capteur pendant
la pÃ©riode t, en se basant sur les caractÃ©ristiques des donnÃ©es de la pÃ©riode t âˆ’ 1. Pour plus
de dÃ©tail sur la modÃ©lisation et la rÃ©solution du problÃ¨me, le lecteur peut se rÃ©fÃ©rer Ã  (Chiky et
HÃ©brail, 2007).
Nous proposons dâ€™intÃ©grer une approche sondage Ã  notre programme dâ€™Ã©chantillonnage
temporel afin de constituer un Ã©chantillon spatio-temporel. Comme pour les approches tradi-
tionnelles, on Ã©tablit un plan de sondage pour constituer un Ã©chantillon avec un nombre de
capteurs n. Deux cas de figure peuvent se prÃ©senter :
â€“ n âˆ— p â‰¥ s : la taille de lâ€™Ã©chantillon n implique le dÃ©passement du seuil s et on est
en mode dit saturÃ©. Dans ce cas on applique un Ã©chantillonnage temporel optimisÃ© afin
de rÃ©cupÃ©rer des courbes Ã  granularitÃ©s variables dans le temps pour chaque capteur de
lâ€™Ã©chantillon. Ceci permet de capter les pÃ©riodes de forte variabilitÃ© des donnÃ©es. Mais,
se pose un problÃ¨me dâ€™estimation des erreurs dâ€™Ã©chantillonnage auxquelles sâ€™ajoutent
R.Chiky et al.
des erreurs dâ€™interpolation des courbes Ã  partir des points rÃ©sumÃ©s. Ce problÃ¨me sera
Ã©voquÃ© dans la section suivante.
â€“ n âˆ— p < s : la taille de lâ€™Ã©chantillon n ne dÃ©passe pas le seuil s et on est en mode dit non
saturÃ©. Les courbes de lâ€™Ã©chantillon sont prises entiÃ¨rement et on applique lâ€™Ã©chantillon-
nage temporel au reste des capteurs (N -n) ne faisant pas partie de lâ€™Ã©chantillon, avec un
seuil de sâ€² = s âˆ’ n âˆ— p. Ceci permet dâ€™amÃ©liorer les estimations calculÃ©es Ã  partir de
lâ€™Ã©chantillon ou dâ€™amÃ©liorer certaines requÃªtes comme celles sur des sous-populations,
correspondant alors Ã  des estimateurs sur des petits domaines.
3.2 ConsÃ©quences sur les estimations
Dâ€™un point de vue formel, il suffit dâ€™estimer une courbe globale Ã  partir dâ€™un Ã©chantillon S.
Nous pouvons Ã©laborer un estimateur Ã  partir dâ€™un estimateur de type Horvitz-Thompson :
Ë†ËœCHT (t) =
âˆ‘
iâˆˆS
CËœi(t) + i(t)
pii
(5)
La principale question qui se pose Ã  nous Ã  ce stade est : la stratÃ©gie Â« spatio-temporelle Â» pro-
posÃ©e prÃ©cÃ©demment peut-elle Ãªtre plus performante quâ€™une stratÃ©gie avec Ã©chantillon sim-
plement spatial ou simplement temporel ? Dâ€™une maniÃ¨re Ã©vidente, la rÃ©ponse va dÃ©pendre de
la stratÃ©gie dâ€™Ã©chantillonnage spatial choisie, mais elle peut aussi dÃ©pendre des techniques de
redressement habituellement utilisÃ©es en sondage pour amÃ©liorer lâ€™estimateur (au sens de la
rÃ©duction de la variance dâ€™Ã©chantillonnage). Elle va dÃ©pendre aussi de la technique dâ€™interpo-
lation utilisÃ©e.
Le fait de ne pas travailler sciemment avec les vraies mesures, mais avec des mesures
entachÃ©es dâ€™une erreur alÃ©atoire, que nous supposerons maitrisÃ©e, met Ã  mal le cadre gÃ©nÃ©ral
dâ€™application de lâ€™estimateur dâ€™Horvitz Thompson, en espÃ©rance et en variance. Le caractÃ¨re
non biaisÃ©, et la formule dâ€™estimation de sa variance prÃ©sentÃ©e en (4) ne sont valables que
si les mesures effectuÃ©es sur lâ€™Ã©chantillon ne sont pas alÃ©atoires, ce qui nâ€™est pas le cas ici
de par la prÃ©sence de i(t). Il nous faut donc connaÃ®tre les performances de lâ€™estimateur (5).
En effet, il a Ã©tÃ© prouvÃ© (Dessertaine, 2007) que sous lâ€™hypothÃ¨se dâ€™indÃ©pendance entre les
interpolations des courbes et le plan de sondage, lâ€™estimateur Horvitz-Thompson (5) est sans
biais, et que lâ€™estimation de sa variance est la somme des variances dâ€™Ã©chantillonnage spatiales
et des variances en chaque instant dues aux interpolations. En effet :
Ë†V ar( Ë†ËœCHT (t)) =
âˆ‘
iâˆˆS
âˆ‘
jâˆˆS
(
CËœi(t)
pii
CËœj(t)
pij
(piij âˆ’ piipij)
)
+
âˆ‘
iâˆˆS
Ïƒ2i (t)
pii(t)
(6)
Avec Ïƒi(t) la variance du rÃ©sidu i(t) en chaque instant, que nous supposerons connue.
Le premier Ã©lÃ©ment de cette somme peut Ãªtre particuliÃ¨rement bien maÃ®trisÃ©, et la deuxiÃ¨me
partie de ce calcul pourra Ãªtre dâ€™autant plus faible que nous pourrons, sur les courbes Ã©chan-
tillonnÃ©s, utiliser un nombre de points de mesures plus important que dans le cas dâ€™un re-
censement. Mais une difficultÃ© supplÃ©mentaire apparaÃ®t Ã  ce niveau. En effet, lâ€™optimisation de
lâ€™Ã©chantillonnage temporel doit se fait sur lâ€™Ã©chantillon spatial choisi. Aussi, lâ€™erreur dâ€™interpo-
lation en un instant t dâ€™une courbe de lâ€™Ã©chantillon dÃ©pend non seulement de la technique dâ€™in-
terpolation utilisÃ©e, mais aussi de lâ€™optimisation temporelle, et donc de lâ€™Ã©chantillon sur lequel
Echantillonnage spatio-temporel de flux de donnÃ©es distribuÃ©s
lâ€™optimisation est utilisÃ©e. Ainsi, nous voyons apparaÃ®tre dans lâ€™estimateur Horvitz-Thompson
deux niveaux dâ€™alÃ©as :
1. Le plan de sondage
2. Le caractÃ¨re alÃ©atoire de lâ€™interpolation des courbes conditionnellement Ã  lâ€™Ã©chantillon
(et conditionnellement Ã  la technique dâ€™interpolation utilisÃ©e).
Des travaux thÃ©oriques sont en cours. Des approches combinant Ã  la fois bootstrap sur plan de
sondages et mouvements browniens pour aborder les erreurs dâ€™interpolation sous contraintes (Ab-
dessalem et al., 2005) seront abordÃ©s dans ce cadre.
4 PremiÃ¨res expÃ©rimentations
4.1 MÃ©thodes dâ€™Ã©chantillonnage
Afin de rÃ©sumer les donnÃ©es provenant des capteurs, plusieurs solutions sont envisageables.
â€“ Un Ã©chantillonnage purement temporel : tous les capteurs sont observÃ©s et la courbe
prÃ©levÃ©e de chaque capteur nâ€™est pas complÃ¨te. On sÃ©lectionne un ensemble minimal
de donnÃ©es Ã©chantillonnÃ©es tout en sâ€™assurant de la reprÃ©sentativitÃ© de ces donnÃ©es pour
sâ€™approcher de la courbe initiale. Pour celÃ , nous rÃ©solvons le problÃ¨me suivant afin dâ€™af-
fecter de faÃ§on optimisÃ©e des pas dâ€™Ã©chantillonnage Ã  la totalitÃ© des courbes :
Minimiser
âˆ‘N
i=1
âˆ‘m
j=1(Wij Ã—Xij)
sous les contraintes :ï£±ï£´ï£²ï£´ï£³
Xij = 0 ou 1âˆ‘m
j=1Xij = 1 i de 1 Ã  Nâˆ‘N
i=1
âˆ‘m
j=1(
âŒŠ
p
j
âŒ‹
Ã—Xij) â‰¤ s i de 1 Ã  N
Il sâ€™agit dâ€™un problÃ¨me dâ€™affectation de pas dâ€™Ã©chantillonnage (granularitÃ© temporelle)
aux diffÃ©rentes courbes en respectant les contraintes ci-dessus. Une courbe Ã©chantillon-
nÃ©e Ã  un pas j signifie que nous effectuons un â€™sautâ€™ de j entre deux points sÃ©lectionnÃ©s.
Par exemple, j = 2 signifie que nous sÃ©lectionnons un point sur deux de la courbe. Les
donnÃ©es prÃ©levÃ©es sont ainsi Ã©quidistantes temporellement.
Une variable Xij Ã  1 signifie que nous affectons le pas dâ€™Ã©chantillonnage j Ã  la courbe
dâ€™indice i . La deuxiÃ¨me contrainte du programme dâ€™optimisation
âˆ‘m
j=1Xij = 1 im-
pose une seule valeur de j par courbe (un seul pas dâ€™Ã©chantillonnage). Enfin, la troisiÃ¨me
contrainte signifie que le nombre de donnÃ©es Ã  communiquer au systÃ¨me central ne doit
pas dÃ©passer le seuil imposÃ© s. Chaque courbe doit Ãªtre Ã©chantillonnÃ©e Ã  un pas infÃ©rieur
ou Ã©gal Ã  m. Nous avons donc la possibilitÃ© de choisir un pas entier allant de 1 (nous
rÃ©cupÃ©rons tous les points de la courbe) Ã  m (les points Ã©chantillonnÃ©s sont distancÃ©s
par m). Nous calculons une matriceWnâˆ—m de n lignes et m colonnes. Un Ã©lÃ©ment wij
de la matrice correspond Ã  la somme des erreurs quadratiques obtenue si on applique un
pas dâ€™Ã©chantillonnage j Ã  la courbe dâ€™indice i. Pour rÃ©soudre ce problÃ¨me, nous utilisons
la mÃ©thode du simplexe appliquÃ©e aux problÃ¨mes linÃ©aires Ã  variables rÃ©elles. Le sim-
plexe est couplÃ© avec la mÃ©thode Branch And Bound (SÃ©paration-Evaluation en franÃ§ais)
R.Chiky et al.
afin dâ€™atteindre des variables entiÃ¨res. Le programme LP_Solve permet de rÃ©soudre des
problÃ¨mes dâ€™optimisation linÃ©aires Ã  variables rÃ©elles et/ou entiÃ¨res . Le lecteur peut se
rÃ©fÃ©rer Ã  (Gondran et al., 1979; lpsolve) pour des informations sur ces mÃ©thodes.
â€“ Un Ã©chantillonnage purement spatial : il sâ€™agit dâ€™effectuer un plan de sondage simple
sans remise afin de tirer un Ã©chantillon alÃ©atoire et uniforme de capteurs. Le seuil im-
posÃ© s dÃ©termine la taille de lâ€™Ã©chantillon, celle-ci se trouve donc limitÃ©e par la bande
passante disponible, et sa valeur est de : n = sp . Chaque capteur i a la mÃªme probabilitÃ©
dâ€™inclusion pii = nN . Et chaque Ã©chantillon S qui peut Ãªtre formÃ© a la mÃªme probabilitÃ©
de sortie p(S) =
(
N
n
)âˆ’1
. Les courbes des capteurs ne faisant pas partie de lâ€™Ã©chantillon
sont estimÃ©es par la courbe moyenne de lâ€™Ã©chantillon que nous â€™calonsâ€™ par rapport Ã  la
consommation globale de chaque capteur qui est une donnÃ©e connue.
â€“ Echantillonnage spatio-temporel : Une troisiÃ¨me solution pour rÃ©sumer les informations
consiste Ã  tirer alÃ©atoirement un Ã©chantillon de taille n (Ã©chantillonnage spatial) et dâ€™ef-
fectuer un Ã©chantillonnage temporel tel quâ€™il a Ã©tÃ© expliquÃ© prÃ©cÃ©demment, soit au niveau
de lâ€™Ã©chantillon en cas de dÃ©passement du seuil (n âˆ— p â‰¥ s), soit au niveau des capteurs
restant dans le cas contraire afin dâ€™amÃ©liorer les estimations. Voici comment nous avons
construit les courbes de consommation :
â€“ n âˆ— p â‰¥ s : Les courbes de lâ€™Ã©chantillon sont reconstruites par interpolation linÃ©aire.
les courbes ne faisant pas partie de lâ€™Ã©chantillon sont estimÃ©es comme dans le cas
purement spatial, par la courbe moyenne de lâ€™Ã©chantillon que nous â€™calonsâ€™ par rapport
Ã  la consommation globale de chaque capteur.
â€“ n âˆ— p < s : Les courbes faisant partie de lâ€™Ã©chantillon nâ€™ont pas besoin dâ€™Ãªtre interpo-
lÃ©es puisque nous rÃ©cupÃ©rons la totalitÃ© des mesures. Pour chaque courbe ne faisant
pas partie de lâ€™Ã©chantillon, nous estimons les donnÃ©es entre deux instants Ã©chantillon-
nÃ©s temporellement par la courbe moyenne de lâ€™Ã©chantillon prise entre ces deux ins-
tants.
4.2 RÃ©sultats
Nous avons expÃ©rimentÃ© les approches dÃ©crites dans le paragraphe prÃ©cÃ©dent grÃ¢ce Ã  un jeu
de donnÃ©es composÃ© de 1000 courbes de consommations Ã©lectriques relevÃ©es Ã  intervalle de
10 minutes pendant une journÃ©e (144 mesures par courbe). Nous avons expÃ©rimentÃ© plusieurs
valeurs de seuil s (nombre total de donnÃ©es que le serveur central peut accepter pendant une
pÃ©riode donnÃ©e). Pour calculer les erreurs commises dans le cas de lâ€™Ã©chantillonnage spatial
de capteurs, nous avons effectuÃ© des simulations de Monte-Carlo (100 simulations).
Les rÃ©sultats sont donnÃ©s sous forme de courbes dans la figure 1. Nous avons calculÃ© la
moyenne (ST), le maximum (STmax) et le minimum (STmin) des erreurs quadratiques com-
mises lors des simulations dans le cas de lâ€™Ã©chantillonnage Spatio-Temporel, et nous avons
calculÃ© les erreurs quadratiques globales (T) dans le cas de lâ€™Ã©chantillonnage purement Tem-
porel. Lâ€™abscisse dans les figures correspond au taux de compression appliquÃ© Ã  lâ€™ensemble
des points des courbes de consommation : un taux de compression de 2 signifie que nous rÃ©cu-
pÃ©rons s = (144âˆ—1000)2 points. Nous avons fait varier la taille de lâ€™Ã©chantillon n dans le cas de
lâ€™Ã©chantillonnage spatio-temporel.
Echantillonnage spatio-temporel de flux de donnÃ©es distribuÃ©s
FIG. 1 â€“ Echantillonnage spatio-temporel Vs. Echantillonnage purement temporel
Un Ã©chantillonnage purement spatial est donc appliquÃ© aux courbes Ã  gauche de la ligne
verticale sur la figure correspondant Ã  une taille de lâ€™Ã©chantillon n = 200 (mode non saturÃ©).
A droite de la ligne, la taille n implique un dÃ©passement du seuil, nous avons donc appliquÃ© un
Ã©chantillonnage spatio-temporel, ainsi que pour la figure de droite correspondant Ã  une taille
de lâ€™Ã©chantillon de n = 800 (mode saturÃ©). Nous remarquons que lâ€™Ã©chantillonnage spatio-
temporel permet de rÃ©duire en moyenne les erreurs commises par rapport Ã  un Ã©chantillonnage
purement temporel. Ce dernier sâ€™avÃ¨re meilleur dans le cas dâ€™un Ã©chantillon de petite taille
et un faible taux de compression. Toutefois, les deux courbes STmax correspondant au maxi-
mum des erreurs et T correspondant aux erreurs par Ã©chantillonnage purement temporel, se
confondent et ceci pour toute valeur de n et tout taux de compression. A noter que la mÃ©thode
de tirage effectuÃ©e est un Ã©chantillonnage alÃ©atoire uniforme, nous envisageons dâ€™expÃ©rimenter
dâ€™autres mÃ©thodes telle que lâ€™Ã©chantillonnage stratifiÃ©, avec comme variables de stratification
des donnÃ©es commerciales (Ã©quipements des clients, tarification,...), donnÃ©es gÃ©ographiques,
ou encore le niveau de consommation Ã©lectrique.
FIG. 2 â€“ Echantillonnage purement spatial Vs. Echantillonnage purement temporel Vs.
Echantillonnage spatio-temporel de taille n=200
R.Chiky et al.
La figure 2 montre les erreurs correspondant Ã  lâ€™Ã©chantillonnage purement spatial (S),
lâ€™Ã©chantillonnage purement temporel (T) et lâ€™Ã©chantillonnage spatio-temporel (ST) avec une
taille dâ€™Ã©chantillon de n = 200. Nous avons expÃ©rimentÃ© plusieurs valeurs de taux de com-
pression. La taille de lâ€™Ã©chantillon spatial dÃ©pend de ce dernier. Un taux de compression de
2 signifie que nous tirons un Ã©chantillon alÃ©atoire uniforme de capteurs de taille n = 10002 .
Les courbes (S) et (ST) correspondent aux courbes moyennes des erreurs quadratiques com-
mises lors des simulations. La figure montre clairement que lâ€™Ã©chantillonnage spatial permet
dâ€™estimer mieux la courbe de consommation globale que lâ€™Ã©chantillonnage purement tempo-
rel et celÃ  pour presque tous les taux de compression. Nous remarquons aussi que lâ€™Ã©chan-
tillonnage purement spatial a un comportement plus ou moins similaire Ã  lâ€™Ã©chantillonnage
spatio-temporel avec une lÃ©gÃ¨re amÃ©lioration pour les faibles taux de compression. Les erreurs
dâ€™interpolation sont donc plus importantes que les erreurs dâ€™Ã©chantillonnage dans le cas de nos
courbes dâ€™expÃ©rimentation.
5 Conclusion
Nous avons proposÃ© une approche dâ€™Ã©chantillonnage spatial de capteurs distribuÃ©s cou-
plÃ©e Ã  un Ã©chantillonnage temporel. Nos premiÃ¨res expÃ©rimentations ont montrÃ© lâ€™intÃ©rÃªt de
cette approche par rapport Ã  un Ã©chantillonnage temporel exhaustif (appliquÃ© Ã  tous les cap-
teurs). Nous avons aussi montrÃ© que lâ€™Ã©chantillonnage spatial sâ€™avÃ¨re meilleur pour estimer une
courbe de consommation globale. Nous envisageons dâ€™expÃ©rimenter ces trois mÃ©thodes pour
estimer des courbes individuellement ou sur des petits domaines et comparer leur comporte-
ment dans ce contexte. Toutefois, des problÃ¨mes se posent quant Ã  lâ€™estimation de la prÃ©cision
avec ou sans dÃ©pendance entre le plan de sondage et les lissages utilisÃ©s. Nous travaillons afin
de dÃ©montrer de faÃ§on thÃ©orique le mÃ©rite dâ€™un Ã©chantillonnage spatio-temporel par rapport Ã 
un Ã©chantillonnage simplement spatial ou simplement temporel.
Une perspective de ce travail est dâ€™appliquer une approche panel aux flux de donnÃ©es prove-
nant de capteurs. On dÃ©finit un panel comme un Ã©chantillon oÃ¹ les individus sont interrogÃ©s au
moins deux fois (Ardilly, 2006). A la diffÃ©rence de lâ€™Ã©chantillonnage qui fournit une informa-
tion ponctuelle, les panels ont pour vocation de mesurer lâ€™Ã©volution de cette mÃªme information
au cours du temps. En gÃ©nÃ©ral, une partie du panel est renouvelÃ©e selon un intervalle de temps
fixÃ©, pour prendre en compte lâ€™Ã©volution de la population ou pour faire face aux non rÃ©ponses
ou Ã  la lassitude des individus. Cependant, dans le cas des donnÃ©es provenant de capteurs,
nous nâ€™avons pas de phÃ©nomÃ¨ne de lassitude. De plus, le renouvellement du panel nâ€™engendre
pas de coÃ»t supplÃ©mentaire, puisque les capteurs sont dÃ©jÃ  installÃ©s chez les clients. Par consÃ©-
quent, nous ferons Ã©voluer dynamiquement le panel selon les variations des donnÃ©es observÃ©es,
de lâ€™Ã©volution des besoins dâ€™analyse et des Ã©volutions des donnÃ©es contractuelles (nouveaux
clients, changement dâ€™Ã©quipements, dÃ©mÃ©nagements...).
RÃ©fÃ©rences
Abdessalem, T., Decreusefond, L., et Moreira, J. (2005). Probabilistic measurement of uncer-
tainty in moving objects databases. In BDAâ€™2005, 21Ã¨mes JournÃ©es de Bases de DonnÃ©es
AvancÃ©es.
Echantillonnage spatio-temporel de flux de donnÃ©es distribuÃ©s
Aggarwal Charu C. (2007). Data streams : models and algorithms, IBM Watson Research
Center, Springer Editions.
Ardilly P. (2006). Les techniques de sondage, Editions Technip.
Babcock B., Babu S., Datar M., Motwani R., Widom J., (2002). Models and issues in data
stream systems. In Symposium on Principles of Database Systems, pp.1-16. ACM SIGACT-
SIGMOD, 2002.
Chiky R. et HÃ©brail G. (2007). Echantillonnage optimisÃ© de donnÃ©es temporelles distribuÃ©es
pour lâ€™alimentation des entrepÃ´ts de donnÃ©es. EDA (EntrepÃ´t de DonnÃ©es et Analyse en
ligne), Poitiers.
Dessertaine A. (2007). Echantillon et flux de donnÃ©es - estimations de courbes de consomma-
tion Ã©lectrique Ã  partir de donnÃ©es fonctionnelles. Colloque francophone sur les sondages
2007, Marseille.
Deville, J. C. (1974). MÃ©thodes statistiques et numÃ©riques de lâ€™analyse harmonique. Annales
de lâ€™INSEE, p. 3-104.
Deville, J. C. (1999). Variance estimation for complex statistics and estimators : linearization
and residual techniques. Survey Methodology, 25, 2, 193-203.
Golab L., Ozsu M.T., (2003). Data stream management issues - a survey, Technical report CS
2003-08, University of Waterloo, Waterloo, Canada, April 2003.
Gondran M., Minoux M., (1979). Graphes et algorithmes. Eyrolles, Paris 1979.
Jain A. et Chang E. Y. (2004). Adaptive sampling for sensor networks. In Proceeedings of
the 1st international Workshop on Data Management For Sensor Networks : in Conjunction
with VLDB 2004 Toronto, Canada.
http ://lpsolve.sourceforge.net/
Muthukrishnan S., (2005). Data streams : algorithms and applications, In Foundations and
Trends in Theoretical Computer Science, Volume 1, Issue 2, August 2005.
Ramsay J.O. et Silverman B.W. (2005). Functional Data Analysis, New-York : Springer-Verlag
TillÃ©, Y. (2006). Sampling Algorithms, New-York : Springer-Verlag
Stonebraker M., Cetintemel U., Zdonik S. (2005). The 8 requirements of real-time stream
processing, SIGMOD Records.
http ://www-db.stanford.edu/stream/
http ://www.streambase.com
Willett R., Martin A., et Nowak R. (2004). Backcasting : adaptive sampling for sensor net-
works. In Proceedings of the Third international Symposium on information Processing in
Sensor Networks, Berkeley, California.
Summary
A growing number of real world applications deal with multiple streams of data produced
by sensors: meteorolgy forecasting, military applications, electric consumption analysis,etc.
Stream mining and analysis techniques employed in these applications have to be efficient in
terms of space usage and process streams â€™on the flyâ€™ as they are produced. In particular, if
R.Chiky et al.
the system is not able to process all data streams, summaries are built. This paper proposes a
new approach for sampling a set of distributed data streams. Our approach is based on survey
theory, functional data analysis and data stream algorithms. This approach will be studied in
relation to a real application on electric power consumption measurement.
