Une repreÂ´sentation des arborescences pour la
recherche de sous-structures freÂ´quentes
Federico Del Razo Lopez, Anne Laurent, Maguelonne Teisseire
LIRMM - UniversiteÂ´ Montpellier II
161 rue Ada 34392 Montpellier cedex 5
{delrazo,laurent,teisseire}@lirmm.fr
ReÂ´sumeÂ´. La recherche de structures freÂ´quentes au sein de donneÂ´es ar-
borescentes est une probleÂ´matique actuellement tre`s active qui trouve
de nombreux inteÂ´reË†ts dans le contexte de la fouille de donneÂ´es comme,
par exemple, la construction automatique dâ€™un scheÂ´ma meÂ´diateur a` par-
tir de scheÂ´mas XML. Dans ce contexte, de nombreuses propositions ont
eÂ´teÂ´ reÂ´aliseÂ´es mais les meÂ´thodes de repreÂ´sentation des arborescences sont
tre`s souvent trop couË†teuses. Dans cet article, nous proposons donc une
meÂ´thode originale de repreÂ´sentation de ces donneÂ´es. Les proprieÂ´teÂ´s de
cette repreÂ´sentation peuvent eË†tre avantageusement utiliseÂ´es par les algo-
rithmes de recherche de structures freÂ´quentes (sous-arbres freÂ´quents). La
repreÂ´sentation proposeÂ´e et les algorithmes associeÂ´s ont eÂ´teÂ´ eÂ´valueÂ´s sur
des jeux de donneÂ´es syntheÂ´tiques montrant ainsi lâ€™intereË†t de lâ€™approche
proposeÂ´e.
1 Introduction
Lâ€™explosion du volume de donneÂ´es disponible sur internet conduit aujourdâ€™hui a`
reÂ´fleÂ´chir sur les moyens dâ€™interroger les grosses masses dâ€™information afin de retrouver
les informations souhaiteÂ´es. Les utilisateurs ne pouvant pas connaË†Ä±tre les mode`les sous-
jacents des donneÂ´es quâ€™ils souhaitent acceÂ´der, il est donc neÂ´cessaire de leur fournir
les outils automatiques de deÂ´finition de scheÂ´mas meÂ´diateurs. Un scheÂ´ma meÂ´diateur
fournit une interface permettant lâ€™interrogation des sources de donneÂ´es par lâ€™utilisateur
au travers de requeË†tes. Lâ€™utilisateur pose alors ses requeË†tes de manie`re transparente a`
lâ€™heÂ´teÂ´rogeÂ´neÂ´iteÂ´ et la reÂ´partition des donneÂ´es.
XML eÂ´tant maintenant preÂ´pondeÂ´rant sur internet, la recherche de moyens dâ€™inteÂ´gra-
tion de tels scheÂ´mas est indispensable. Si les recherches permettant lâ€™acce`s aux donneÂ´es
quand un scheÂ´ma dâ€™interrogation est connu sont maintenant bien avanceÂ´es (Xyleme,
2001), les recherches concernant la deÂ´finition automatique dâ€™un scheÂ´ma meÂ´diateur res-
tent incomple`tes et sont donc non satisfaisantes (Tranier et al., 2004). Dans le but de
proposer une approche permettant de reÂ´pondre a` cette dernie`re probleÂ´matique, nous
nous focalisons sur la recherche de sous-structures freÂ´quentes au sein dâ€™une base de
donneÂ´es de scheÂ´mas XML. Une sous-structure freÂ´quente est un sous-arbre se trouvant
dans la plupart des scheÂ´mas XML consideÂ´reÂ´s. Cette proportion est examineÂ´e au sens
dâ€™un support qui correspond a` un nombre minimal dâ€™arbres de la base dans lesquels
doit se retrouver le sous-arbre pour eË†tre consideÂ´reÂ´ comme freÂ´quent. Une telle recherche
- 299 - RNTI-E-5
Structure de repreÂ´sentation des arborescences
est complexe dans la mesure ou` il est neÂ´cessaire de traduire lâ€™ensemble des scheÂ´mas en
une structure aiseÂ´ment manipulable. Cette transformation des donneÂ´es conduit parfois
a` doubler ou tripler la taille de la base initiale de`s lors que lâ€™on souhaite utiliser des
proprieÂ´teÂ´s speÂ´cifiques permettant dâ€™ameÂ´liorer le processus de fouille. Il nâ€™existe pas de
solution efficace a` ce proble`me alliant une repreÂ´sentation compacte a` des proprieÂ´teÂ´s
inteÂ´ressantes. Lâ€™objet de cet article est la deÂ´finition dâ€™une nouvelle structure reÂ´pondant
a` cet objectif puisque les proprieÂ´teÂ´s de la repreÂ´sentation proposeÂ´e peuvent permettre
une geÂ´neÂ´ration des candidats et un eÂ´lagage aussi performants que les approches de
reÂ´feÂ´rence (Asai et al., 2002, Zaki, 2002, Termier et al., 2002).
La section 3 preÂ´sente le cÅ“ur de notre proposition deÂ´finissant une nouvelle meÂ´thode
de repreÂ´sentation des donneÂ´es arborescentes ainsi quâ€™un apercÂ¸u de la meÂ´thode mise en
Å“uvre pour la geÂ´neÂ´ration et lâ€™eÂ´lagage des candidats. La section 4 preÂ´sente les reÂ´sultats
des premie`res expeÂ´rimentations meneÂ´es. Enfin, la section 5 conclut et preÂ´sente les prin-
cipales perspectives associeÂ´es a` nos travaux.
2 Travaux connexes
2.1 DeÂ´finitions preÂ´liminaires
Les travaux les plus significatifs concernant lâ€™extraction de sous-arbres freÂ´quents
se trouvent dans (Kuramochi et Karypis, 2001, Asai et al., 2002, Yan et Han, 2002,
Zaki, 2002, Termier et al., 2002). Les deÂ´finitions suivantes sont inspireÂ´es de ces travaux.
Un arbre est un graphe connexe sans cycle. Il est composeÂ´ dâ€™un ensemble de nÅ“uds
relieÂ´s par des arcs tels quâ€™il existe un nÅ“ud particulier nommeÂ´ racine et tel que tous les
autres nÅ“uds hormis la racine sont composeÂ´s dâ€™un ensemble de sous-arbres. On parle
dâ€™arbre ordonneÂ´ si lâ€™ordre des sous-arbres importe, et dâ€™arbre non ordonneÂ´ sinon.
relation indirecte
a a
a
b
pÃ¨re
fils
descendant
ancÃªtre
L={a,b}
a
b
b
0
1 2 3
4
5 6
T relation directe
Fig. 1 â€“ Arbre
Soit un alphabet dâ€™eÂ´tiquettes L = {a, b, c, ...}, on conside`re un arbre eÂ´tiqueteÂ´ et
ordonneÂ´ noteÂ´ T = {r,N,B,L, F} ou` : r est la racine de lâ€™arbre, N est lâ€™ensemble des
nÅ“uds, B est lâ€™ensemble des areË†tes tel que B âŠ† V 2, (L : N â†’ L) est une fonction
qui associe une eÂ´tiquette aux nÅ“uds dans N et F est une relation dâ€™ordre de droite a`
- 300 -RNTI-E-5
Del Razo Lopez et al.
gauche entre fre`res.
b
S
a
a c
0
1 2
S3
a
a
0
1 2
b
S4 a
0
21 3
b c d
1
b
T4 a
0
T2
a
b
a
0
1
2
a
0
S1
a
0
1
2
T3
a
b
a)
b)
2 3
dc
c)
a
T
1
2
3
1
a
4
b
5
c
b
a
a
0
1 2
2
Fig. 2 â€“ Inclusion et non inclusion de S dans T
Plusieurs nÅ“uds pourront avoir la meË†me eÂ´tiquette, ce qui introduit un proble`me
de polyseÂ´mie (une meË†me eÂ´tiquette renvoie a` plusieurs nÅ“uds diffeÂ´rents). La taille de
T , noteÂ´e |T |, est le nombre de nÅ“uds dans T . lâ€™ordre de T correspond au nombre de
branches dans T .
Chaque nÅ“ud n est associeÂ´ a` un numeÂ´ro unique i, correspondant a` sa position par
un parcours en profondeur dâ€™abord. ni fait alors reÂ´feÂ´rence au i-e`me nÅ“ud en utilisant
un scheÂ´ma de numeÂ´ration (i = 0...|T | âˆ’ 1).
Pour chaque couple (x, y) âˆˆ N Ã— N , il peut exister une relation directe entre x
et y si x est le pe`re de y ou bien une relation indirecte si x est un anceË†tre de y (il
faut alors suivre plusieurs arcs successifs pour aller de x a` y). La figure 1 montre
une relation directe (pe`re-fils) entre les nÅ“uds 0 et 3 de T , et une relation indirecte
(anceË†tre-descendant) entre les nÅ“uds 3 et 6.
On note S Â¹ T le fait que le sous-arbre S est inclus dans lâ€™ arbre eÂ´tiqueteÂ´ ordonneÂ´
T (voir figure 2). Dans le cadre dâ€™une relation indirecte anceË†tre-descendant, S Â¹ T si
et seulement si les suivantes conditions sont satisfaites :
1. NS âŠ‚ NT
2. Pour toutes les branches bS = (x, y) âˆˆ BS , x est anceË†tre de y dans T
3. Pour toutes les branches bT = (x, y) âˆˆ BT , x est anceË†tre de y dans S
4. Pour toutes les branches b1S = (x, y1) âˆˆ BS et b2S = (x, y2) âˆˆ BS telles que
y1 â‰ºF y2, y1 â‰ºF y2 dans T
2.2 Les repreÂ´sentations existantes
Lâ€™algorithme TREEMINER (Zaki, 2002) propose une meÂ´thode dâ€™extraction de
sous-arbres freÂ´quents. De meË†me que dans notre approche, ces travaux reposent sur une
- 301 - RNTI-E-5
Structure de repreÂ´sentation des arborescences
a
b a
c
a
n=0, s=[0, 4]
n=1, s=[1, 3]
n=2, s=[2, 3]
n=3, s=[3, 3]
n=4, s=[4, 4]
T0
0, [0, 4]
0, [2, 3]
0, [4, 4]
0, [1, 3] 0, [3, 3]
     a              b               c 
T, comme une chaÃ®ne chiffrÃ©e:
T, comme une liste dâ€™Ã©tendue:
a  b  a  c  âˆ’1  âˆ’1  âˆ’1  a  âˆ’1, taille: ( 2|T| )
taille: ( 3|T| )
Fig. 3 â€“ RepreÂ´sentation proposeÂ´e dans (Zaki, 2002)
repreÂ´sentation originale des arbres facilitant la gestion des candidats. NeÂ´anmoins, la
repreÂ´sentation verticale adopteÂ´e aboutit a` stocker trois fois la taille dâ€™un arbre comme
lâ€™indique la figure 3.
Lâ€™approche proposeÂ´e dans (Asai et al., 2002) est deÂ´dieÂ´e aux arbres ordonneÂ´s et
adopte une structure permettant des performances tre`s inteÂ´ressantes. Mais cette repreÂ´-
sentation, illustreÂ´e figure 4, conduit eÂ´galement a` tripler la taille de la base afin de
stocker les informations neÂ´cessaires.
b a c aa
2 3 410
1 2 3
4next
first
lb
T
a
b a
c
a
T
0
1
2
3
4
ReprÃ©sentation "first child âˆ’ next sibling" de  T, taille: ( 3|T| )
Fig. 4 â€“ RepreÂ´sentation proposeÂ´e dans (Asai et al., 2002)
Des proposition reÂ´centes se basent sur une repreÂ´sentation efficace des arbres mais
neÂ´anmoins, elles nâ€™utilisent pas des proprieÂ´teÂ´s aussi inteÂ´ressantes que les travaux preÂ´-
ceÂ´dents afin dâ€™ameÂ´liorer les traitement des structures candidates. Nous pouvons citer
(Wang et al., 2004) dont la structure est illustreÂ´e figure 5 et (Chi et al., 2004), (Chi
et al., 2003) proposant une repreÂ´sentation des arbres illustreÂ´e figure 6.
Lâ€™objectif est alors de proposer a` la fois une repreÂ´sentation peu couË†teuse de la base
- 302 -RNTI-E-5
Del Razo Lopez et al.
niveau
1
2
3
4
T  reprÃ©sentÃ© comme une combinaison dâ€™une sÃ©quence 
en profondeur dâ€™abord et niveau:
a1   b2    a3    c4     a2 taille: ( 2|T| ),
a
b a
c
a
T0
Fig. 5 â€“ RepreÂ´sentation proposeÂ´e dans (Wang et al., 2004)
a
b a
c
a
T
T, comme une chaÃ®ne chiffrÃ©e:
taille: ( 2|T| )a  b  a  c  &  &  &  a  #, 
& pour remonter Ã  un niveau superieur
#  fin de la chaÃ®ne.
Fig. 6 â€“ RepreÂ´sentation proposeÂ´e dans (Chi et al., 2004,Chi et al., 2003)
- 303 - RNTI-E-5
Structure de repreÂ´sentation des arborescences
et des proprieÂ´teÂ´s inteÂ´ressantes pour ameÂ´liorer le processus de fouille de donneÂ´es. Câ€™est
dans ce contexte que se situe notre proposition deÂ´crite au paragraphe suivant.
3 Proposition
Dans cet article, nous proposons une nouvelle approche permettant lâ€™extraction
efficace de sous-arbres freÂ´quents au sein dâ€™une base de donneÂ´es arborescentes. Notre
proposition sâ€™appuie sur une meÂ´thode de repreÂ´sentation des arbres originale qui permet
de geÂ´neÂ´rer de manie`re efficace les sous-arbres candidats puis dâ€™eÂ´laguer les sous-arbres
non freÂ´quents (apre`s calcul du support).
3.1 RepreÂ´sentation des arbres
Pour la repreÂ´sentation dâ€™un arbre T , nous profitons de la propieÂ´teÂ´ suivante : chaque
nÅ“ud dans lâ€™arbre posse`de un seul parent. Nous proposons dâ€™utiliser deux vecteurs
pour repreÂ´senter un arbre comme indiqueÂ´ dans (Weiss, 1998). Le premier, nommeÂ´ st,
conserve la position du pe`re de chaque nÅ“ud. Les nÅ“uds de lâ€™arbre sont numeÂ´roteÂ´s
en profondeur dâ€™abord, la racine de T correspondant a` lâ€™index 0 et ayant une valeur
st[0] = âˆ’1 pour indiquer que la racine nâ€™a pas de pe`re. Les valeurs st[i], i = 0, 1, ..., kâˆ’1
correspondent alors aux positions du pe`re des nÅ“uds i, comme illustreÂ´ sur la figure 7.
(âˆ’1)
st
lb b a c aa
âˆ’1
2 3 410
0 1 2 0
a
b a
c
a
0
1
2
3
4
T
racine feuille la
plus Ã  droite
Fig. 7 â€“ RepreÂ´sentation dâ€™un arbre
Cette repreÂ´sentation permet de retrouver en temps constant le pe`re dâ€™un nÅ“ud.
De plus, elle permet la localisation directe de la feuille la plus a` droite par rapport
a` lâ€™index k. En parcourant lâ€™arbre, on peut baË†tir toutes les relations directes pe`re-fils
entre nÅ“uds.
Le deuxie`me vecteur, nommeÂ´ lb, est utiliseÂ´ pour enregistrer les eÂ´tiquettes de lâ€™arbre
avec lb[i], i = 0, 2, ..., k âˆ’ 1 repreÂ´sentant lâ€™eÂ´tiquette de chaque nÅ“ud ni âˆˆ T .
- 304 -RNTI-E-5
Del Razo Lopez et al.
La structure adopteÂ´e permet une repreÂ´sentation des arbres peu couË†teuse puisquâ€™elle
se reÂ´duit a` 2|T |. De plus elle posse`de des proprieÂ´teÂ´s inteÂ´ressantes, eÂ´voqueÂ´es au para-
graphe suivant, pouvant eË†tre utiliseÂ´es lors de la recherche de sous structures freÂ´quentes.
3.2 GeÂ´neÂ´ration et eÂ´lagage des candidats
Les candidats de taille 1 sont obtenus en parcourant tous les nÅ“uds des arbres de
la base de donneÂ´es. Chaque nÅ“ud voit son support increÂ´menteÂ´ lors de ce parcours et
seuls sont conserveÂ´s les nÅ“uds dont le support final est supeÂ´rieur au support minimal
deÂ´fini par lâ€™utilisateur. La base de donneÂ´es est alors transformeÂ´e pour ne conserver que
les nÅ“uds freÂ´quents, comme illustreÂ´ par la figure 8.
st
lb
0 1 2 3 4 5 6 7
c b a b d
âˆ’1âˆ’1 âˆ’1 1 âˆ’1 3 4 4
b
6
7
d
F1={a, b, c ,d}
T2
a
3
4
5
0
c
b
b
b
(âˆ’1)
(âˆ’1)
a
1 3
2 4
5 6
7
0
e
c
b
b
b e
d
T2
Fig. 8 â€“ Transformation de la base de donneÂ´es apre`s geÂ´neÂ´ration de F1
Les candidats de taille 2 sont geÂ´neÂ´reÂ´s en combinant deux a` deux tous les freÂ´quents
de taille 1.
La base de donneÂ´es est alors mise a` jour, en modifiant les arbres de la racine, des
sommets et des feuilles afin de ne conserver que les liens entre les nÅ“uds freÂ´quents. Les
figures 9, 10 et 11 illustrent ce processus, en consideÂ´rant Ïƒ = 7 et F2 = {aâˆ’ d, aâˆ’ b}.
7
d
T2
2noeuds dans F ={a, b, d}
b
a
3
4
5
b
b
(âˆ’1)
st
lb
0 1 2 3 4 5 6 7
b a b d
âˆ’1âˆ’1 âˆ’1 âˆ’1 3 4 4
b
âˆ’1
2
0 1 6
Fig. 9 â€“ Transformation de la base - racine
La geÂ´neÂ´ration des candidats de taille k â‰¥ 3 sâ€™effectue de la meË†me manie`re que dans
les approches classiques de type Apriori (Agrawal et Srikant, 2002), par combinaison
- 305 - RNTI-E-5
Structure de repreÂ´sentation des arborescences
des freÂ´quents de taille k âˆ’ 1.
T2
F2= 
7
d
(âˆ’1)
st
lb
0 1 2 3 4 5 6 7
a b d
âˆ’1âˆ’1 âˆ’1 âˆ’1 4 4âˆ’1
a
b
a
d
Ensemble de noeuds pÃ¨res = {a }
3
a
4
5
b
0 1 2 6
âˆ’1
Ensemble de noeuds fils = { b, d }
Fig. 10 â€“ Transformation de la base - sommets
Lâ€™originaliteÂ´ de notre approche reÂ´side dans lâ€™utilisation de notre repreÂ´sentation pour
lâ€™eÂ´lagage des candidats non freÂ´quents. Le calcul du support de chaque candidat consiste
a` compter le nombre dâ€™arbres de la base qui contiennent ce sous-arbre candidat. Pour ce
faire, pour chaque arbre de la base, il sâ€™agit de chercher les points dâ€™ancrage sur lesquels
la racine du sous-arbre a` tester peut sâ€™instancier. Pour chaque point dâ€™ancrage trouveÂ´,
on cherche alors a` instancier lâ€™ensemble des nÅ“uds de lâ€™arbre candidat au sein de lâ€™arbre
courant testeÂ´. On note que nous cherchons une instanciation exacte du candidat au sein
des arbres de la base. Si tous les nÅ“uds du candidat ont eÂ´teÂ´ trouveÂ´s, lâ€™arbre supporte
le candidat. Le support de la structure candidate est alors increÂ´menteÂ´. Ce qui nâ€™est pas
le cas si tous les nÅ“uds de lâ€™arbre ont eÂ´teÂ´ parcourus sans trouver lâ€™ensemble des nÅ“uds
du candidat.
 
 
















	
	

 


 

 
 




















...
...
...
...
Fig. 11 â€“ Transformation de la base - feuilles
- 306 -RNTI-E-5
Del Razo Lopez et al.
Fig. 12 â€“ ReÂ´sulats expeÂ´rimentaux : temps de calcul
4 ExpeÂ´rimentations
Des expeÂ´rimentations sont meneÂ´es sur les donneÂ´es issues du geÂ´neÂ´rateur de scheÂ´mas
XML deÂ´veloppeÂ´ par Alexandre Termier (Termier et al., 2002). Les reÂ´sultats, illustreÂ´s
figure 12, soulignent lâ€™inteÂ´reË†t de notre approche, concernant les temps de calcul.
5 Conclusion et perspectives
Dans cet article, nous proposons une approche originale de repreÂ´sentation de donneÂ´es
arborescentes dont les proprieÂ´teÂ´s permettent une extraction efficace de sous-arbres
freÂ´quents. Les premie`res expeÂ´rimentations reÂ´aliseÂ´es sur des donneÂ´es syntheÂ´tiques laissent
envisager des reÂ´sultats tre`s prometteurs par rapport aux approches de reÂ´feÂ´rence. Notre
objectif est donc de poursuivre dans cette voie et dâ€™optimiser les diffeÂ´rents algorithmes
associeÂ´s.
Ces travaux seront eÂ´galement utiliseÂ´s dans le cadre de la meÂ´diation de donneÂ´es, les
sous-arbres freÂ´quents extraits servant de support a` la construction automatique dâ€™un
scheÂ´ma meÂ´diateur. Une telle solution peut eÂ´galement eË†tre adopteÂ´e dans le cadre de la
fouille de donneÂ´es en ligne (data streams) pour le traitement a` la voleÂ´e de donneÂ´es
XML. Cette perspective permettra de traiter les gros volumes de donneÂ´es transitant
sur internet de manie`re efficace et rapide.
ReÂ´feÂ´rences
Agrawal, R. and Srikant, R. (2002). Fast algorithms for mining association rules
in large databases. In Proceedings of the 20th VLDB Conference, Santiago, Chile.
Asai, T., Abe, K., Kawasoe, S., Arimura, H., and Sakamoto, H. (2002). Efficient
substructure discovery from large semi-structure data. In 2nd Annual SIAM Sympo-
sium on Data Mining, SDM2002, Arlington, VA, USA. Springer-Verlag.
- 307 - RNTI-E-5
Structure de repreÂ´sentation des arborescences
Chi, Y., Yang, Y., and Muntz, R. R. (2003). Indexing and mining free trees. In
International Conference on Data Mining 2003 (ICDM2003).
Chi, Y., Yang, Y., and Muntz, R. R. (2004). Cmtreeminer : Mining both closed
and maximal frequent subtrees. In The Eighth Pacific-Asia Conference on Knowledge
Discovery and Data Mining (PAKDDâ€™04).
Kuramochi, M. and Karypis, G. (2001). Frequent subgraph discovery. In IEEE
International Conference on Data Mining (ICDM).
Termier, A., Rousset, M.-C., and Sebag, M. (2002). Treefinder, a first step towards
XML data mining. In IEEE Conference on Data Mining (ICDM), pages 450â€“457.
Tranier, J., Baraer, R., Bellahsene, Z., and Teisseire, M. (July, 7th - 9th 2004).
Whereâ€™s Charlie : Family based heuristics for peer-to-peer schema integration. In
Proceedings of the 8th International Database Engineering and Applications Symposium
(IDEAS â€™04), Coimbra, Portugal.
Wang, C., Yuan, Q., Zhou, H., Wang, W., and Shi, B. (May 2004). Chopper :
An efficient algorithm for tree mining. Journal of Computer Science and Technology,
19 :309â€“319.
Weiss, M. A. (1998). Data Structures And Algorithm Analysis In C.
Xyleme, L. (2001). A dynamic warehouse for xml data of the web. In IEEE Data
Engineering Bulletin.
Yan, X. and Han, J. (2002). gspan : Graph-based substructure pattern mining. In
IEEE Conference on Data Mining (ICDM).
Zaki, M. (2002). Efficiently mining frequent trees in a forest. In ACM-SIGKDDâ€™02.
Summary
Mining frequent subtrees from tree databases is currently a very active research
topic. This research has many interests, including for instance mediator schema building
from XML schemas. In this framework, many works have been proposed. However,
the way the data are represented is often very memory-consuming. In this paper, we
propose a new method to represent such data. We show that this representation has
many properties, which can be used in order to enhance subtree mining algorithms.
Experiments are led to assess our proposition (data representation and its associated
algorithms).
- 308 -RNTI-E-5
