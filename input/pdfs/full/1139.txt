EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
75© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
76© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
77© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
78© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
79© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
80© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
81© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
82© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
83© Revue MODULAD, 2007 Numéro 36
EUROPEAN WORKSHOP ON DATA STREAM ANALYSIS • March, 14-16, 2007 • Caserta, Italy
84© Revue MODULAD, 2007 Numéro 36
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 1
Analyzing the Evolution of Web 
Usage Data
Alzennyr da Silva
INRIA-Rocquencourt, France
Brazil
Outline
z Introduction
z Motivations for this work
z Our proposition
z Clustering approach based on time sub-periods
z The benchmark website analyzed
z Results analysis 
z Final conclusion
z Future works
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 2
Introduction
z The WWW:
– one of the most relevant examples of voluminous and dynamic data
sources
z Web access patterns have a dynamic nature, due to:
– the dynamism of the website’s content and structure 
or
– the change of user’s interest
z Access patterns may depend on:
– time of day, day of the week
– recurrent factors (summer/winter vacations, national holidays, 
seasonality)
– non-recurrent global events (epidemics, wars, the World Cup)
– etc.
Motivations for this work
z The majority of methods in the Web Usage Mining 
(WUM) domain take into account the whole period
of usage traces.
– Consequence:
• the results are those predominant in the entire period 
of analysis
– Negative side effects:
• behaviour patterns occurring in short periods of time 
are not detected by traditional methods
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 3
Our proposition
z To carry out an analysis on significant time 
sub-periods, in order to:
– identify the change of user’s interest
– follow the evolution of user’s profiles over time 
using 
Summaries to represent user profiles
Our proposition
time
O
ur
 
pr
op
os
iti
on
(P1, P2, …, Pk)
clustering
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 4
The website analyzed
z Recife’s (Brazil) Information Technology Centre 
website (http://www.cin.ufpe.br/):
– static pages (personal web pages, lessons pages, etc.)
– 91 dynamic pages (maintained by Java servlets in a 
semantic structure)
z We retrieved the traces of usage:
– 1 July 2002 – 31 May 2003 (roughly 2Go of raw data)
Common Log Format (CLF)
[remotehost] [name] [login] [date] [url] [status] [size] [referrer] [agent]
¾ remotehost remote identification ( hostname or IP address)
¾ name/login the remote login name of the user
¾ date date and time of the request
¾ URL requested page in the site (www.<…>)
¾ status returned code (Indicates whether or not the file was successfully retrieved)
¾ size the number of bytes transferred 
¾ referrer the url the client was on before requesting the current url
¾ agent the software the client is using
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 5
Data Pre-processing
Tanasa & Trousse (Advanced Data Preprocessing for Intersites Web Usage
Mining, IEEE Intelligent Systems, vol. 19, n° 2, pp. 56-65, April 2004)
Tanasa’s Thesis (2005)
Data selection 
z We selected navigations with two shared 
constraints:
– long
• number of requests >= 10
• total duration >= 60 seconds
– those of human origin
• total duration / number of requests >= 4 (15 requests/ min)
z After filtering and eliminating the outliers:
– 138,536 navigations
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 6
Statistical attributes for navigations’
description
Maximum request duration among successful requests MaxDuration_OK14
Average of transferred bytes among requests ( = TotalSize / NbRequests_OK)ASize13
Total bytes transferred in a navigationTotalSize12
Percentage of semantic requests (=NbRequests_Sem/ NbRequests) in the navigationMRequests_Sem11
Number of requests for the (91) dynamic pages concerning the site’s semantic structureNbRequests_Sem10
Average of duration among successful requests ( = TotalDuration _OK / NbRequests_OK)ADuration_OK9
Average of request duration ( = TotalDuration / NbRequests)ADuration8
Total duration of the navigation (in secondes)TotalDuration7
Percentage of repeated requests ( = NbRepetitions / NbRequests)MRepetitions6
Number of repeated requests in the navigationNbRepetitions5
Percentage of successful requests ( = NbRequests_OK/ NbRequests)MRequests_OK4
Number of failed requests (status < > 200) in the navigationNbRequests_bad3
Number of successful requests (status = 200) in the navigationNbRequests_OK2
Navigation code IDNavigation1
MeaningFieldN°
z To split the analyzed period into more significant 
time sub-periods: months of the year
z The clustering is carried out by an adapted version 
of the dynamic clustering algorithm (Celeux et al. 
(1989)):
1. Assignment of new individuals to a previous clustering
2. Initialization of the algorithm with the results of another 
clustering carried out by itself
Clustering approach based on time sub-periods
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 7
z Algorithm parameters :
– Number of clusters = 10 
– Number of repetitions = 100
z To carry out four types of clustering :
1. Global clustering 
2. Independent local clustering 
3. Previous local clustering 
4. Dependent local clustering 
Clustering approach based on time sub-periods
(1/4) Global clustering
Data 
set
Nav. 1
Nav. 2
Nav. m-1
Nav. m
clustering
(k=10)
cluster 1
cluster 2
cluster k
.
.
.
1st sub-
period
(k<=10)
2nd sub-
period
(k<=10)
nth sub-
period
(k<=10)
n-1th sub-
period
(k<=10)…
1st sub-
period
2nd sub-
period
n-1 th sub-
period
n th sub-
period
.
.
.
1st sub-
period
2nd sub-
period
n-1 th sub-
period
n th sub-
period
.
.
.
1ere sous-
période
2eme sous-
période
n-1 eme sous-
période
n eme sous-
période
.
.
.
Filter
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 8
(2/4) Independent local clustering
clustering
(k=10)
1st sub-
period
(k=10)
2nd sub-
period
(k=10)
n-1th sub-
period
(k=10)
nth sub-
period
(k=10)Data 
set
1st sub-
period
cluster 2
.
.
.
cluster 1
cluster k-1
cluster k
clustering
(k=10)
2nd sub-
period
cluster 2
.
.
.
cluster 1
cluster k-1
cluster k
clustering
(k=10) cluster 2
.
.
.
n-1th sub-
period
cluster 1
cluster k-1
cluster k
.
.
.
clustering
(k=10) cluster 2
.
.
.
nth sub-
period
cluster 1
cluster k-1
cluster k
Previous and dependent local clustering
. . . 
2nd sub-period
1st sub-period
3th sub-period
4th
sub-period
Nth
sub-period
P1, P2, …, P10
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 9
(3/4) Previous local clustering
clustering
(k=10)
Data
set
1st sub-
period
cluster 2
.
.
.
cluster 1
cluster k
clustering
(k=10)
2nd sub-
period
cluster 2
.
.
.
cluster 1
cluster k
2nd sub-
period
P1
P2
Pk
Allocation
step
.
.
.
cluster k
cluster 2
cluster 1
1st sub-
period
(k=10)
2nd sub-
period
(k=10)
n-1th sub-
period
(k=10)
nth sub-
period
(k=10)
3th sub-
period
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1Allocation
step
clustering
(k=10) cluster 2
.
.
.
n-1th sub-
period
cluster 1
cluster k
.
.
.
clustering
(k=10) cluster 2
.
.
.
nth sub-
period
cluster 1
cluster k
nth sub-
period
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
2nd sub-
period
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
Allocation
step
Allocation
step
1st sub-
period
(k=10)
2nd sub-
period
(k=10)
n-1th sub-
period
(k=10)
nth sub-
period
(k=10)
(4/4) Dependent local clustering
clustering
(k=10)
Data
set
1st sub-
period
cluster 2
.
.
.
cluster 1
cluster k
2nd sub-
period
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
clustering
(k=10)
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
clustering
(k=10)
3th sub-
period
n-1th sub-
period
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
clustering
(k=10)
P1
P2
Pk
.
.
.
cluster k
cluster 2
cluster 1
clustering
(k=10)
nth sub-
period
cluster k
cluster 2
cluster 1
…
…
…
.
.
.
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 10
z Evaluation criteria :
– For a cluster-by-cluster analysis
• F-measure (van Rijsbergen (1979))
– For a global analysis between two partitions
• Corrected Rand index (Hubert et Arabie (1985))
Results analysis
Follow-up of cluster prototypes
z To better understand the cluster evolution 
over time sub-periods, we planned to:
– Follow the evolution of cluster prototypes (month 
by month) for the local clustering: independent
and dependent
– Project these prototypes on the factorial plan 
computed over the total population
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 11
Follow-up of cluster prototypes
Fig.1 Projection and follow-up of cluster prototypes  for local clustering.
Independent local clustering Dependent local clustering
Intra-cluster variance
Fig.3 Intra-cluster variance for clustering : independent (black line), 
dependent (red line) and global (blue line).
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 12
Corrected Rand index results
Fig.4 Cluster-by-cluster corrected Rand index.
F-measure results
Fig.5 Boxplots corresponding to cluster-by-cluster F-measures.
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 13
Conclusion
z The methods of global and dependent local clustering show 
that the obtained partition do not change over time or 
change only a bit
z The method of independent local clustering is more 
sensitive to changes occurring between two sub-periods
z The analysis of dynamic data by means of time sub-periods 
offers advantages:
– makes the method more effective in terms of cluster discovery
– allows to overcome difficulties related to physical limitations 
(memory size, processor speed, etc.)
Future works
z Implementation of other clustering methods
z Application of techniques allowing the 
automatic discovery of the cluster number
z Identification of merge and split between 
clusters over time
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 14
Thanks for your attention!
Questions
Intra-cluster variation
∑ ∑
= ∈
=
k
j Cx
j
j
PxdQV
1
),()(
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 15
F-measure
The F-mesure combines the concepts of precision and recall
between two Ui and Ck of two partitions. 
The recall is defined as R(i,k)=nki /nk.
It computes the percentage of elements from class a priori k founded in 
class i obtained by the classification method.
The recall also decreases when the number of classes in the partition 
obtained by the classification decreases.
The precision is defined as P(i,k)= nki /n.i
It computes the percentage of elements from class i founded in the a 
priori class k.
The precision increases when the number of classes in the partition 
obtained by the classification decreases.
The F-measure between the a priori partition U in K classes and 
the partition P obtained by the classification method is defined
as:
F-measure for the a priori class k :
F-measure
( ) ( ) ( ) ( ) ( )( )( )∑
=
+=
K
k j
k jkPjkRjkPjkRnnF
1
. ,,/,.,.2max,
( ) ( ) ( ) ( ) ( )( )( )jkPjkRjkPjkRkF
j
,,/,.,.2max +=
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 16
Corrected Rand index
∑∑∑∑
∑∑∑∑
==
−
==
==
−
= =
⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛−⎥⎦
⎤⎢⎣
⎡ +⎟⎟⎠
⎞
⎜⎜⎝
⎛+⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛−⎟⎟⎠
⎞
⎜⎜⎝
⎛
=
C
j
j
R
i
i
R
i
i
C
j
j
C
j
j
R
i
i
R
i
C
j
ij
nnnnn
nnnn
CR
1
.
1
.
1
1
.
1
.
1
.
1
.
1
1 1
222222
1
2222
nnnnn
nnnnu
nnnnu
nnnnu
vvv
C
RRCRRR
C
C
c
=...2.1.
.21
.2222212
.1112111
21
K
MMMMM
K
K
K
Key statistics
z After the pre-processing and data selection:
– 138,536 navigations
– 184,275 pages (where 91 dynamics)
– 56,314 users 
– Average duration of page visualization:
• 1.19 minutes
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 17
Masseglia et al. In Advanced Web Technologies and Applications, APWeb
2004, Hangzhou, China. Vol. 3007, pages 513-522 of LNCS, 2004.
z The authors propose a method of recursive 
division for discovering sequential patterns 
of weak support (until 0.006%):
– hacking activities
– minority users’ behaviours
z The split is based on a classification over 
the whole log and on time
Web Usage Mining: Sequential Pattern Extraction with a Very Low Support.
The dynamic clustering method
Let E be a set of n objects {s1,…,sn} described by p variables,  Λ be a 
set of  prototypes and ψ be a distance function on Dx x Λ.
Each object s of E is described by a vector xs of Dx (the  representation 
space of elements in E).
The problem is to find simultaneously:
• one partition P = (C1,...,CK) of E in not empty K classes 
• the prototypes L = (L1,...,LK) of Λ which optimise the criteria Δ(P,L):
Λ∈∈=Δ ∑ ∑
= ∈
kk
K
k Cs
ks LPCLLP
i
,),(),(
1
xψ
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 18
(b) Allocation
For each objet si of Ε compute the index l of the
affectation class which verifies 
(a) Initialization
Choose K distinct prototypes L1,...,LK in Λ
(c) Representation
For each class k find the prototype Lk in 
Λ which minimizes
),(minarg iK1,...,k kLl xψ= =
∑
∈
ψ=
kCs
sk LLCw ),(),( x
Repeat (b) and (c) until the convergence
The dynamic clustering algorithm
Diday (1971)
The original k-means algorithm
Initialization     Choose K points in ℜ p ),,( 0100 KLLL K=
At the t step We associate the xt implementation to the class 
k which has the nearest prototype ( )tltKl xLk ,minarg ,,1 ψK==
We modify the prototype of the class k by
11 +
+=+
k
t
k
tkk
t n
xLnL
where nk is the number of implementation already put into the 
class k. ( ) εψ ≤+ tt LL ,1Stopping criterion we must have 
Suppose we have a sample of infinite size.
With the xt implementation, we only have information regarding 
the sample of size t .
Alzennyr Cléa Gomes da Silva
Módulo de Geração de 
Indicadores/Gráficos Estatísticos do SIAD 19
Projection of cluster prototypes
Fig.2 Cluster prototypes projection for clustering : 
global (G1, G2, ...,G10), dependent local (o) and independent local (+).
