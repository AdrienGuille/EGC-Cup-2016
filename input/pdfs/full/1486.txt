Les simulations dans l’enseignement des
sondages
Avec le logiciel GENESIS sous SAS
et la bibliothe`que “Sondages” sous R
Yves Aragon∗, David Haziza∗∗ & Anne Ruiz-Gazen∗
∗GREMAQ, UMR CNRS 5604, Universite´ des Sciences Sociales, 21 alle´e
de Brienne, 31000 Toulouse et Laboratoire de Statistique et Probabilite´s,
UMR CNRS 5583.
∗∗ Statistique Canada, 120, avenue Parkdale Ottawa (Ontario) K1A OT6.
Email : aragon@cict.fr, dhaziza@rogers.com, ruiz@cict.fr
Re´sume´ : L’objectif de cette pre´sentation est de montrer l’inte´reˆt d’utiliser
des simulations dans un cours de the´orie des sondages. En simulant des
tirages d’e´chantillons dans une population et en calculant des indicateurs
Monte Carlo pour les estimations obtenues a` partir des e´chantillons tire´s,
on peut facilement comparer des me´thodes d’e´chantillonnage ainsi que des
me´thodes d’estimation. Pour cela, on pre´sente deux solutions : le logiciel
GENESIS sous SAS et la bibliothe`que “Sondages” sous R. L’utilisation de
chacune de ces solutions sera illustre´e sur des bases de donne´es re´elles.
Mots-cle´s : Enseignement, Simulations, The´orie des sondages,.
Abstract : The aim of this presentation is to show the use of simulations
in a sampling theory course. By simulating sample drawings in a population
and by calculating Monte Carlo indicators for the estimations obtained from
the drawn samples, we can easily compare sampling methods and also esti-
mation methods. For this purpose, we present two solutions : the software
GENESIS for SAS and the library “Sondages” for R. The use of each of these
solutions will be illustrated on real data sets.
Keywords : Teaching, Sampling theory, Simulations.
1 Introduction
D’un point de vue pe´dagogique, utiliser des exemples simule´s dans un cours
de the´orie des sondages est inte´ressant a` plusieurs e´gards.
c© Revue MODULAD, 2005 -86- Nume´ro 32
Tout d’abord, dans la the´orie des sondages probabilistes et a` la diffe´rence
des me´thodes usuelles de statistique infe´rentielle, la population d’e´tude est
conside´re´e comme finie. Le statisticien s’inte´resse au processus de tirage
de l’e´chantillon ce qui de´concerte souvent les e´tudiants. Sur une popula-
tion d’e´tude observable exhaustivement, on peut facilement tirer plusieurs
e´chantillons, calculer des estimations a` partir de chacun des e´chantillons et
comparer les estimations aux valeurs exactes. Ceci pre´cise de fac¸on convain-
cante a` quel niveau se situe l’ale´atoire en the´orie des sondages.
D’autre part, si le cours ne consiste qu’a` e´nume´rer des plans de sondage et
des me´thodes d’estimation de moyennes, totaux et variances, il devient rapi-
dement fastidieux et trop abstrait. En utilisant des applications nume´riques
base´es sur des simulations, l’enseignant se dote d’un outil pre´cieux pour illus-
trer les proprie´te´s the´oriques des me´thodes d’e´chantillonnage et d’estimation
et pour comparer diffe´rentes me´thodes.
Depuis la version 8.2, SAS propose une proce´dure performante de tirage
d’e´chantillons selon diffe´rents plans de sondages (proc surveyselect) ainsi que
des proce´dures d’estimation (proc surveymeans et proc surveyreg). L’utilisation
de ces proce´dures dans l’enseignement des sondages a e´te´ de´crit dans Aragon
et Ruiz-Gazen (2003). Toutefois, ces proce´dures pre´sentent divers inconve´nients.
Tout d’abord, elles supposent une bonne connaissance du logiciel SAS. En-
suite, en ce qui concerne les proce´dures d’estimation, elles ont e´te´ conc¸ues
pour permettre d’ame´liorer les proc means et proc reg, en tenant compte
de plans de sondages plus sophistique´s que le plan simple avec remise dans
les estimations, mais ne sont pas adapte´es a` un cours de sondages. Ainsi,
l’enseignant qui utilise ces proce´dures devra souvent avoir recours a` des
“astuces” pour obtenir les estimations qu’il attend (voir le proble`me de
l’estimation correcte de la variance dans un plan a` deux degre´s dans Aragon
et Ruiz-Gazen, 2003).
Dans le pre´sent papier, nous envisageons deux solutions alternatives a`
l’utilisation des proce´dures SAS qui nous paraissent mieux adapte´es a` un
cours sur la the´orie des sondages. Nous proposons d’utiliser le logiciel GEN-
ESIS (Generalized Simulation System) de´veloppe´ a` Statistique Canada (Haz-
iza, 2003) sous SAS ou la bibliothe`que “Sondages” (Aragon, 2003) sous R.
Le logiciel GENESIS est une interface ergonomique sous SAS, utilisable
sans connaissance pre´alable de SAS, et qui permet de simuler des e´chantillons
selon des plans de sondages divers, calculer des estimateurs de totaux ou
moyennes par les valeurs dilate´es, par le ratio et par re´gression ainsi que des
indicateurs Monte Carlo et e´diter des graphiques qui permettent de comparer
les diffe´rentes me´thodes d’estimation. A l’origine, GENESIS a e´te´ de´veloppe´
pour des e´tudes de simulations en pre´sence de non-re´ponse. Il est donc aussi
c© Revue MODULAD, 2005 -87- Nume´ro 32
particulie`rement performant pour simuler de la non-re´ponse dans des donne´es
comple`tes et comparer les me´thodes d’estimation dans ce cadre.
La bibliothe`que “Sondages” sous R comporte plusieurs proce´dures. Elles
permettent de tirer des e´chantillons suivant la plupart des plans propose´s
par la proc surveyselect de SAS et, pour chacun de ces plans, d’estimer des
totaux et moyennes par les valeurs dilate´es, par le ratio et par re´gression.
Les variances de ces estimateurs sont aussi estime´es, de fac¸on exacte si cela
est possible et par approximation sinon.
2 Le logiciel GENESIS
GENESIS version 1.2 (Generalized Simulation System), conc¸u a` Statistique
Canada (Haziza, 2003), est une interface ergonomique qui utilise le logi-
ciel SAS version 8. Le syste`me est constitue´ de macros SAS relie´es a` des
menus par SAS/AF. GENESIS peut eˆtre utilise´ dans un cours de the´orie
des sondages par l’enseignant ainsi que par les e´tudiants afin d’illustrer des
concepts the´oriques tels que le choix d’un plan de sondage, le choix d’un esti-
mateur ou encore le choix de la re´partition dans le cas d’un plan de sondage
stratifie´. GENESIS est un syste`me relativement facile a` utiliser qui ne re-
quiert pas de connaissances pre´alable du logiciel SAS et est relativement
efficace en terme de temps d’exe´cution. GENESIS comprend trois modules :
(1) Full Response Module
(2) Imputation Module
(3) Class Module
Nous de´crivons maintenant le module Full Response qui est approprie´
dans le contexte d’un cours de the´orie des sondages. L’utilisateur commence
par fournir a` GENESIS une population sous forme de table SAS qui servira de
point de de´part pour les e´tudes de simulation. Ce module permet l’estimation
d’un total ou d’une moyenne de population finie. Plusieurs plans de sondage
sont disponibles pour la se´lection des e´chantillons : e´chantillonnage ale´atoire
simple sans remise, e´chantillonnage proportionnel a` la taille avec ou sans
remise, e´chantillonnage stratifie´ ale´atoire simple, e´chantillonnage de Poisson,
e´chantillonnage a` un et deux degre´s, e´chantillonnage a` deux-phases ainsi
que la me´thode de Rao-Hartley-Cochran. Dans le cas de l’e´chantillonnage
stratifie´ ale´atoire simple, l’utilisateur peut choisir entre une re´partition op-
timale, une re´partition de Neyman, une re´partition proportionnelle et une
re´partition quelconque. Pour estimer le parame`tre d’inte´reˆt (moyenne ou to-
tal), GENESIS calcule l’estimateur de Horvitz-Thompson, l’estimateur par le
c© Revue MODULAD, 2005 -88- Nume´ro 32
ratio et l’estimateur par re´gression. Dans le cas de l’e´chantillonnage stratifie´
ale´atoire simple, GENESIS calcule les estimateurs par le ratio se´pare´ et com-
bine´ ainsi que les estimateurs par re´gression se´pare´ et combine´. Finalement,
GENESIS calcule plusieurs mesures Monte Carlo telles que le biais relatif des
estimateurs, l’erreur quadratique moyenne, le biais relatif des estimateurs de
variance ainsi que la probabilite´ de couverture des intervalles de confiance.
Les re´sultats des simulations sont stocke´s dans des tableaux SAS, ce qui
donne une plus grande flexibilite´ a` l’utilisateur. Par exemple, un tableau
contenant les re´sultats pour chacune des ite´rations permettra a` l’utilisateur
de facilement calculer des mesures Monte Carlo autres que celles propose´es
par de´faut dans GENESIS. De plus, GENESIS propose plusieurs graphiques
qui permettent une comparaison aise´e de la performance des estimateurs.
Dans le cas des modules Imputation et Class, GENESIS permet d’e´tudier
la performance des estimateurs en pre´sence de non-re´ponse. Il permet a`
l’utilisateur d’e´tudier l’effet du me´canisme de non-re´ponse (uniforme, ignor-
able et non-ignorable) sur le biais et la variance des estimateurs. Pour un
me´canisme de non-re´ponse donne´, GENESIS permet de comparer plusieurs
me´thodes d’imputation ainsi que deux me´thodes pour la construction de
classes d’imputation. Bien que ces deux modules puissent eˆtre utilise´s dans
un cours avance´ de the´orie des sondages, ils s’adressent plutoˆt a` des me´thodologues
ou des charge´s d’e´tude afin de re´pondre a` des questions telles que : quelle
me´thode d’imputation doit-on utiliser ? Comment doit-on former les classes
d’imputation ? Combien de classes doit-on utiliser ?
3 La bibliothe`que “Sondages”
Cette bibliothe`que (Aragon, 2003) a e´te´ e´crite pour mettre a` la disposition
des e´tudiants un outil re´pondant a` diffe´rents objectifs :
1. inte´gration dans un logiciel libre de calcul statistique,
2. disponibilite´ de fonctions semblables a` celles qu’offrent les proc survey-
select, surveymeans et surveyreg de SAS,
3. adoption d’une approche design based.
On a choisi de de´velopper les fonctions dans l’environnement R. Dans son
e´tat actuel, la bibliothe`que contient des fonctions de se´lection d’e´chantillons
uniques ou re´plique´s, avec ou sans stratification, suivant diffe´rents plans de
sondage : plan simple sans remise, plan simple avec remise, plan syste´matique,
avec ou sans tri suivant une variable auxiliaire, plan proportionnel a` la taille
c© Revue MODULAD, 2005 -89- Nume´ro 32
avec remise, plan proportionnel a` la taille syte´matique, plan proportionnel a`
la taille par la me´thode de Brewer.
L’estimation de totaux et de moyennes se fait par les valeurs dilate´es ou
par re´gression. L’estimation de la variance des estimateurs pre´ce´dents est,
suivant les plans, exacte (plan simple et me´thode de Brewer) ou approche´e
pour les plans syste´matiques (Brewer, 2002).
Remarquons qu’il existe aussi sous R le package survey (Lumley, 2003) qui
ne contient pas de fonctions pour le tirage d’e´chantillons mais qui incorpore
de nombreuses fonctions pour l’estimation de parame`tres d’inte´reˆt tels que
moyennes et totaux mais aussi quantiles et coefficients de re´gression pour des
plans de sondages complexes.
4 Exemple
Lors de la pre´sentation, nous conside´rerons diffe´rents jeux de donne´es et
diffe´rentes applications permettant d’illustrer l’utilisation du logiciel GENE-
SIS et de la bibliothe`que “Sondages” dans un cours de sondages.
Par exemple, nous proposons de comparer la me´thode de re´partition pro-
portionelle a` la me´thode de re´partition optimale dans le plan stratifie´. Pour
cela, nous conside´rons la population des 554 communes de moins de 10000
habitants de la Haute-Garonne pour lesquelles nous disposons de donne´es is-
sues du recensement de 1999. Nous nous inte´ressons a` l’estimation du nom-
bre total de logements vacants. Les communes sont re´parties en 4 strates
d’apre`s la variable nombre de logements, conside´re´e comme auxiliaire. Les
strates des petites communes (en nombre de logements) contiennent plus de
communes mais avec une dispersion plus faible que les strates des grandes
communes. La re´partition optimale donne donc des re´sultats tre`s diffe´rents
de la re´partition proportionnelle a` la taille. Le logiciel GENESIS et la bib-
liothe`que “Sondages” permettent de calculer ces re´partitions et de comparer,
par exemple, la pre´cision des estimateurs par les valeurs dilate´es. Ainsi, si
on calcule le biais relatif Monte Carlo des estimateurs de variance, on met
clairement en e´vidence le gain en pre´cision de la re´partition optimale par
rapport a` la re´partition proportionnelle pour ce type de donne´es.
Bibliographie
[1] Aragon Y. (2003). Sondages dans R. Disponible aupre`s de l’auteur
(aragon@cict.fr).
c© Revue MODULAD, 2005 -90- Nume´ro 32
[2] Aragon, Y., Ruiz-Gazen, A. (2003). Utilisation des proce´dures SAS dans
l’enseignement des sondages, soumis pour publication.
[3] Brewer K. R. W. (2002). Combined Survey Sampling Inference: Weighing
Basu’s Elephants. Oxford Univ Press.
[4] Haziza, D. (2003). The Generalized Simulation System (GENESIS) : A
pedagogical and methodological tool. To appear in the proceedings of the
2003 Survey Research Section of the American Statistical Association.
[5] Lumley, T. (2003). “Analysing Survey Data in R”. Rnews vol. 3/1, june
2003, pp. 17-20.
c© Revue MODULAD, 2005 -91- Nume´ro 32
